extends ../_index.pug

block state
  - const title = 'Tag Picker'
  - const scripts = ['../index.min.js']
  - const styles = ['../index.min.css']

block script
  script
    | const picker = new TP(document.querySelector('input'), {
    |     max: 5,
    |     pattern: '^[a-z\\d]+(-[a-z\\d]+)*$'
    | });
    |
    | function setError() {
    |     picker.self.classList.add(picker.state['class'] + '--error');
    |     setTimeout(() => {
    |         picker.self.classList.remove(picker.state['class'] + '--error');
    |     }, 2000);
    | }
    |
    | function letError() {
    |     picker.self.classList.remove(picker.state['class'] + '--error');
    | }
    |
    | picker.on('blur', letError);
    | picker.on('has.tag', setError);
    | picker.on('let.tag', letError);
    | picker.on('max.tags', setError);
    | picker.on('min.tags', setError);
    | picker.on('not.tag', setError);
    | picker.on('set.tag', letError);

block style
  style
    | .tag-picker--focus {
    |   border-color: #00f;
    |   box-shadow: 0 0 0 3px rgba(0, 0, 255, .25);
    | }
    | .tag-picker--error {
    |   border-color: #f00;
    |   box-shadow: 0 0 0 3px rgba(255, 0, 0, .25);
    | }

block content
  main
    p Add #[em foo] again, or add #[em 3] more tags, or type a weird tag name:
    p: input(type='text' value='foo, bar, baz')
