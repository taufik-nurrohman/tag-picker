/*!
 *
 * The MIT License (MIT)
 *
 * Copyright © 2025 Taufik Nurrohman <https://github.com/taufik-nurrohman>
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the “Software”), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in all
 * copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED “AS IS”, WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
 * SOFTWARE.
 *
 */
!function(n,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):(n="undefined"!=typeof globalThis?globalThis:n||self).TagPicker=t()}(this,(function(){"use strict";function n(n,t){(null==t||t>n.length)&&(t=n.length);for(var r=0,e=Array(t);r<t;r++)e[r]=n[r];return e}function t(t,r,e){if(r&&!Array.isArray(r)&&"number"==typeof r.length){var i=r.length;return n(r,e<i?e:i)}return t(r,e)}function r(n,t){return function(n){if(Array.isArray(n))return n}(n)||function(n,t){var r=null==n?null:"undefined"!=typeof Symbol&&n[Symbol.iterator]||n["@@iterator"];if(null!=r){var e,i,u,o,a=[],f=!0,c=!1;try{if(u=(r=r.call(n)).next,0===t){if(Object(r)!==r)return;f=!1}else for(;!(f=(e=u.call(r)).done)&&(a.push(e.value),a.length!==t);f=!0);}catch(n){c=!0,i=n}finally{try{if(!f&&null!=r.return&&(o=r.return(),Object(o)!==o))return}finally{if(c)throw i}}return a}}(n,t)||e(n,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function e(t,r){if(t){if("string"==typeof t)return n(t,r);var e={}.toString.call(t).slice(8,-1);return"Object"===e&&t.constructor&&(e=t.constructor.name),"Map"===e||"Set"===e?Array.from(t):"Arguments"===e||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e)?n(t,r):void 0}}var i=function(n){return Array.isArray(n)},u=function(n,t,r){return!(!n||"object"!=typeof n)&&(r?f(t)&&f(n.constructor)&&t===n.constructor:f(t)&&n instanceof t)},o=function(n){return"number"==typeof n},a=function(n,t){return void 0===t&&(t=!0),!(!n||"object"!=typeof n)&&(!t||u(n,Object,1))},f=function(n){return function(n){return void 0!==n}(n)&&!function(n){return null===n}(n)},c=function(n){return"string"==typeof n},l=function(){for(var n=arguments.length,t=Array(n),r=0;r<n;r++)t[r]=arguments[r];for(var e,u=t.shift(),o=0,c=p(t);o<c;++o)for(var s in t[o])if(f(u[s]))if(i(u[s])&&i(t[o][s])){u[s]=[].concat(u[s]);for(var v=0,d=p(t[o][s]);v<d;++v)e=t[o][s][v],-1===u[s].indexOf(e)&&u[s].push(t[o][s][v])}else a(u[s])&&a(t[o][s])?u[s]=l({},u[s],t[o][s]):u[s]=t[o][s];else u[s]=t[o][s];return u},s=function(n){if(i(n))return n.map((function(t){return s(n)}));if(a(n)){for(var t in n)n[t]=s(n[t]);return n}return!1===n?"false":null===n?"null":!0===n?"true":""+n},v=function(n){return n.replace(/[-_.](\w)/g,(function(n,t){return d(t)}))},d=function(n){return n.toUpperCase()},p=function(n){return n.length},h=function(n){if(i(n))return n.map((function(n){return h(n)}));if(a(n)){for(var t in n)n[t]=h(n[t]);return n}return c(n)&&function(n){return/^[+-]?(?:\d*\.)?\d+$/.test(n+"")}(n)?"0"===n[0]&&-1===n.indexOf(".")?n:function(n,t){return void 0===t&&(t=10),t?parseInt(n,t):parseFloat(n)}(n):"false"!==n&&("null"===n?null:"true"===n||n)},m=function(n,t){for(var r,e=0,i=p(n);e<i;++e)if(-1!==(r=t(n[e],e))){if(0===r)break}else n.splice(e,1);return n},y=function(n,i){for(var u,o=function(n){var t="undefined"!=typeof Symbol&&n[Symbol.iterator]||n["@@iterator"];if(t)return(t=t.call(n)).next.bind(t);if(Array.isArray(n)||(t=e(n))||n&&"number"==typeof n.length){t&&(n=t);var r=0;return function(){return r>=n.length?{done:!0}:{done:!1,value:n[r++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}(n);!(u=o()).done;){var a=t(r,u.value,2),f=a[0],c=a[1];if(-1!==(c=i(c,f))){if(0===c)break}else _(f,n)}return n},b=function(n,t){var r;for(var e in n)if(-1!==(r=t(n[e],e))){if(0===r)break}else delete n[e];return n},g=function(n){return n.prototype},x=function(n,t){return t.get(n)},_=function(n,t){return t.delete(n)},k=function(n,t,r){return r||(n=g(n)),b(t,(function(t,r){Object.defineProperty(n,r,t)})),n},j=function(n,t){return w(n,t,A)},w=function(n,t,r){return r.set(n,t)},A=new WeakMap,S=document,T=function(n,t){return void 0===t&&(t="e:"),L(n)?function(n,t,r){if(void 0===r&&(r=!0),!C(n,t))return null;var e=n.getAttribute(t);return r?h(e):e}(n,"id"):(f(R[t])||(R[t]=0),t+(r=Date.now()+(R[t]+=1),e=16,o(r)?r.toString(e):""+r));var r,e},O=function(n,t){return t?n.closest(t)||null:n.parentNode||null},I=function(n,t){var r=(n.value||"").replace(/\r?\n|\r/g,"\n");return""!==r?r:null},C=function(n,t){return n.hasAttribute(t)},L=function(n){return C(n,"id")},M=function(n,t){return t in n},N=function(n,t){return n.removeAttribute(t),n},P=function(n,t){return n.style[v(t)]=null,n},E=function(n,t,r){return D(n,"aria-"+t,!0===r?"true":r)},F=function(n,t){return b(t,(function(t,r){t||""===t||0===t?E(n,r,t):function(n,t){N(n,"aria-"+t)}(n,r)})),n},D=function(n,t,r){return!0===r&&(r=t),n.setAttribute(t,s(r)),n},H=function(n,t){return n.append(t),t},U=function(n,t){return n.classList.add(t),n},$=function(n,t){return i(t)?(m(t,(function(t){return U(n,t)})),n):a(t)?(b(t,(function(t,r){return t?U(n,r):function(n,t){return n.classList.remove(t),n}(n,r)})),n):(n.className=t,n)},q=function(n,t){return b(t,(function(t,r){t||""===t||0===t?z(n,r,t):function(n,t){N(n,"data-"+t)}(n,r)})),n},z=function(n,t,r){return(i(r)||a(r))&&(r=JSON.stringify(r)),D(n,"data-"+t,!0===r?"true":r)},B=function(n,t,r,e){return n=c(n)?S.createElement(n,c(e)?{is:e}:e):n,i(t)&&p(t)?(!function(n){var t="innerHTML";M(n,t)&&(n[t]="")}(n),m(t,(function(n){return H(c(n)?J(n):n)}))):a(t)&&(r=t,t=!1),c(t)&&W(n,t),a(r)?(function(n,t){b(t,(function(t,r){return"aria"===r&&a(t)?(F(n,t),1):"class"===r?($(n,t),1):"data"===r&&a(t)?(q(n,t),1):"style"===r&&a(t)?(Q(n,t),1):void(t||""===t||0===t?D(n,r,t):N(n,r))}))}(n,r),n):n},J=function(n){return c(n)&&(n=S.createTextNode(n)),n},W=function(n,t,r){if(void 0===r&&(r=!0),null===t)return n;var e="innerHTML";return M(n,e)&&(n[e]=r?t.trim():t),n},G=function(n,t,r){return void 0===r&&(r="e:"),D(n,"id",f(t)?t:T(n,r))},K=function(n,t,r){return o(r)&&(r+="px"),n.style[v(t)]=s(r),n},Q=function(n,t){return b(t,(function(t,r){t||""===t||0===t?K(n,r,t):P(n,r)})),n},R={};var V,X,Y="TagPicker";function Z(n,t){var r=this;if(!n)return r;if(!u(r,Z))return new Z(n,t);j(n,function(n,t){return(t=t||n).fire=function(n,t,r){var e=this,i=e.hooks;return f(i[n])?(m(i[n],(function(n){n.apply(r||e,t)})),e):e},t.off=function(n,t){var r=this,e=r.hooks;if(!f(n))return e={},r;if(f(e[n]))if(f(t)){var i=p(e[n]);if(0===i)delete e[n];else for(var u=0;u<i;++u)if(t===e[n][u]){e[n].splice(u,1);break}}else delete e[n];return r},t.on=function(n,t){var r=this.hooks;return f(r[n])||(r[n]=[]),f(t)&&r[n].push(t),this},n.hooks={},n}(r,Z._));var e=l({},Z.state,c(t)?{join:t}:t||{});return a(t)&&t.escape&&(e.escape=t.escape),r.attach(n,e)}function nn(n,t){var r=this;return u(r,nn)?(r.of=n,r.values=new Map,t&&n._mask.flex,r):new nn(n,t)}return Z.from=function(n,t){return new Z(n,t)},Z.of=function(n){return x(n,A)||null},Z.state={escape:[","],join:", ",max:1/0,min:0,n:"tag-picker",pattern:null,tags:null,with:[]},Z.version="4.1.0",k(Z,{name:{value:Y}},1),k(Z,{active:{get:function(){return this._active},set:function(n){return this}},fix:{get:function(){return this._fix},set:function(n){return this}},max:{get:function(){},set:function(n){return this}},min:{get:function(){},set:function(n){return this}},tags:{get:function(){return this._tags},set:function(n){var t=[];return y(this._tags,(function(n){return t.push((r=n[2],getDatum(r,"value",!1)));var r})),this.fire("set.tags",[t])}},text:{get:function(){return function(n,t){void 0===t&&(t=!0);var r="textContent";if(!M(n,r))return!1;var e=n[r];return""!==(e=t?e.trim():e)?e:null}(this._mask.input)},set:function(n){var t,r=this,e=r._active,i=r._mask,u=i.hint,o=i.input;return e?(function(n,t,r){if(void 0===r&&(r=!0),null===t)return n;var e="textContent";M(n,e)&&(n[e]=r?t.trim():t)}(o,t=s(n)),t?K(u,"color","transparent"):P(u,"color"),r):r}},value:{get:function(){var n=I(this.self);return""!==n?n:null},set:function(n){var t=this,r=t.state;return t.value&&m(t.value.split(r.join),(function(n){return t.let(n,0)})),m(n.split(r.join),(function(n){return t.set(n,0)})),t}}}),k(nn,{name:{value:Y+"Tags"}},1),Z._=(X={attach:function(n,t){var r=this;n=n||r.self,t&&c(t)&&(t={join:t}),t=l({},r.state,t||{}),r._event=null,r._tags=new nn(r),r._value=null,r.self=n,r.state=t;var e=t;e.max;var u=e.min,o=e.n,s=n.disabled,v=function(n){return n.readOnly}(n),d=function(n){return n.required}(n),p=n.placeholder,h=I(n);r._active=!s&&!v,r._fix=v,d&&u<1&&(t.min=u=1);var y=function(n){var t="form";return M(n,t)&&t===function(n){return(n&&n.nodeName||"").toLowerCase()||null}(n[t])?n[t]:O(n,t)}(n),b=B("div",{aria:{disabled:!!s&&"true",multiselectable:"true",readonly:!!v&&"true"},class:o,role:"combobox"});r.mask=b;var g=B("span",{class:o+"__flex",role:"group"}),x=B("span",{class:o+"__text",tabindex:0}),_=B("span",{aria:{disabled:!!s&&"true",multiline:"false",placeholder:p,readonly:!!v&&"true"},autocapitalize:"off",contenteditable:!s&&!v&&"",role:"textbox",spellcheck:"false",tabindex:!!v&&0}),k=B("span",p+"",{role:"none"});H(b,g),H(g,x),H(x,_),H(x,k),j(_,r),U(n,o+"__self"),function(n,t){O(n).insertBefore(t,function(n){return n.nextSibling||null}(n))}(n,b),y&&(G(y),j(y,r)),n.tabIndex=-1,j(b,r);var w={};w.flex=g,w.hint=k,w.input=_,w.of=n,w.self=b,w.values=new Set,w.text=x,r._mask=w;var A=r._active,S=t.tags,C=[];return r._active=!0,S?C=[]:h&&(h.split(t.join),C=[]),r._value=C.join(t.join),r._active=A,E(n,"hidden",!0),E(_,"controls",T(g)),G(b),G(g),G(n),G(_),G(k),f(t)&&i(t.with)&&m(t.with,(function(e,i){c(e)&&(e=OptionPicker[e]),isFunction(e)?e.call(r,n,t):a(e)&&isFunction(e.attach)&&e.attach.call(r,n,t)})),r}},V=g(V=Z),b(X,(function(n,t){V[t]=n})),V),g(nn)[Symbol.iterator]=function(){return this.values[Symbol.iterator]()},Z.Tags=nn,Z}));