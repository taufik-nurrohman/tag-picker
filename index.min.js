/*!
 *
 * The MIT License (MIT)
 *
 * Copyright © 2024 Taufik Nurrohman <https://github.com/taufik-nurrohman>
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the “Software”), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in all
 * copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED “AS IS”, WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
 * SOFTWARE.
 *
 */
!function(t,n){"object"==typeof exports&&"undefined"!=typeof module?module.exports=n():"function"==typeof define&&define.amd?define(n):(t="undefined"!=typeof globalThis?globalThis:t||self).TagPicker=n()}(this,(function(){"use strict";var t=function(t){return Array.isArray(t)},n=function(t){return"function"==typeof t},e=function(t,n){return t&&i(n)&&t instanceof n},r=function(t,n){return void 0===n&&(n=!0),"object"==typeof t&&(!n||e(t,Object))},i=function(t){return function(t){return void 0!==t}(t)&&!function(t){return null===t}(t)},u=function(t){return"string"==typeof t},o=function(t){return t.toLowerCase()},f=function(t){return t.length},a=function n(){for(var e=arguments.length,u=Array(e),o=0;o<e;o++)u[o]=arguments[o];for(var a,c=u.shift(),s=0,l=f(u);s<l;++s)for(var v in u[s])if(i(c[v]))if(t(c[v])&&t(u[s][v])){c[v]=[].concat(c[v]);for(var p=0,h=f(u[s][v]);p<h;++p)a=u[s][v][p],-1===c[v].indexOf(a)&&c[v].push(u[s][v][p])}else r(c[v])&&r(u[s][v])?c[v]=n({},c[v],u[s][v]):c[v]=u[s][v];else c[v]=u[s][v];return c},c=function n(e){if(t(e))return e.map((function(t){return n(e)}));if(r(e)){for(var i in e)e[i]=n(e[i]);return e}return!1===e?"false":null===e?"null":!0===e?"true":""+e},s=document,l=function(t,n){return n?t.closest(n)||null:t.parentNode||null},v=function(t){var n="form";return p(t,n)&&n===function(t){return o(t&&t.nodeName||"")||null}(t[n])?t[n]:l(t,n)},p=function(t,n){return n in t},h=function(t,n){return t.removeAttribute(n),t},d=function(t,n,e){return!0===e&&(e=n),t.setAttribute(n,c(e)),t},y=function(t,n){return t.append(n),n},b=function(t,n,e){return t=u(t)?s.createElement(t):t,r(n)&&(e=n,n=!1),u(n)&&g(t,n),r(e)&&function(t,n){var e;for(var r in n)(e=n[r])||""===e||0===e?d(t,r,e):h(t,r)}(t,e),t},g=function(t,n,e){if(void 0===e&&(e=!0),null===n)return t;var r="innerHTML";return p(t,r)&&(t[r]=e?n.trim():n),t};function m(t){return t.disabled}function _(t,n){var r=this;return t?e(r,_)?(t["_"+_.name]=function(t,n){return(n=n||t).fire=function(t,n){var e=this,r=e.hooks;return i(r[t])?(r[t].forEach((function(t){return t.apply(e,n)})),e):e},n.off=function(t,n){var e=this,r=e.hooks;if(!i(t))return r={},e;if(i(r[t]))if(i(n)){var u=r[t].length;if(0===u)delete r[t];else for(var o=0;o<u;++o)if(n===r[t][o]){r[t].splice(o,1);break}}else delete r[t];return e},n.on=function(t,n){var e=this.hooks;return i(e[t])||(e[t]=[]),i(n)&&e[t].push(n),this},t.hooks={},t}(r,_.prototype),r.attach(t,a({},_.state,u(n)?{join:n}:n||{}))):new _(t,n):r}_.state={class:"tag-picker",escape:[","],join:", ",max:9999,min:0,pattern:null,with:[]},_.version="4.0.0",Object.defineProperty(_,"name",{value:"TagPicker"});var k=_.prototype;function w(){this._input&&this._input.focus()}return k._filter=function(t){return o(t||"").trim()},k.attach=function(e,o){var a,c=this;e=e||c.self,o=o||c.state,c._active=!0,c._value=a=function(t){return t.value.replace(/\r/g,"")}(e),c.self=e,c.state=o,c.tags=a.split(o.join);var s=o.class,p=s+"__";v(e);var h=b("div",{class:s,tabindex:!m(e)&&-1}),d=b("span",{class:p+"tags"}),g=b("span",{class:p+"tag "+p+"text"});b("input",{class:p+"copy",tabindex:-1,type:"text"});var k,x,j=b("span",{contenteditable:!m(e)&&"true",spellcheck:"false",style:"white-space:pre;"}),A=b("span");if(y(h,d),y(d,g),y(g,j),y(g,A),function(t,n){t.classList.add(n)}(e,p+"self"),x=h,l(k=e).insertBefore(x,function(t,n){return t.nextSibling||null}(k)),function(t,n,e,r){void 0===r&&(r=!1),n.addEventListener(t,e,r)}("focus",e,w),e._input=j,i(o)&&t(o.with))for(var L=0,T=f(o.with);L<T;++L){var E=o.with[L];u(E)&&(E=_[E]),n(E)?E.call(c,e,o):r(E)&&n(E.attach)&&E.attach.call(c,e,o)}return c},k.blur=function(){},k.click=function(){},k.detach=function(){var e,i,o=this,a=o.self,c=o.state;if(o._active=!1,e="focus",i=w,a.removeEventListener(e,i),delete a._input,t(c.with))for(var s=0,l=f(c.with);s<l;++s){var v=c.with[s];u(v)&&(v=_[v]),r(v)&&n(v.detach)&&v.detach.call(o,a,c)}return o},k.focus=function(){},k.get=function(){},k.let=function(){},k.set=function(){},Object.defineProperty(k,"value",{get:function(){return this.self.value},set:function(t){this.self.value=t}}),_}));