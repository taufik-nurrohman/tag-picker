/*!
 *
 * The MIT License (MIT)
 *
 * Copyright © 2025 Taufik Nurrohman <https://github.com/taufik-nurrohman>
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the “Software”), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in all
 * copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED “AS IS”, WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
 * SOFTWARE.
 *
 */
!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define(e):(t="undefined"!=typeof globalThis?globalThis:t||self).TagPicker=e()}(this,(function(){"use strict";function t(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=Array(e);n<e;n++)r[n]=t[n];return r}function e(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(n)return(n=n.call(t)).next.bind(n);if(Array.isArray(t)||(n=i(t))||t&&"number"==typeof t.length){n&&(t=n);var r=0;return function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function n(e,n,r){if(n&&!Array.isArray(n)&&"number"==typeof n.length){var i=n.length;return t(n,r<i?r:i)}return e(n,r)}function r(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var r,i,u,a,o=[],s=!0,f=!1;try{if(u=(n=n.call(t)).next,0===e){if(Object(n)!==n)return;s=!1}else for(;!(s=(r=u.call(n)).done)&&(o.push(r.value),o.length!==e);s=!0);}catch(t){f=!0,i=t}finally{try{if(!s&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(f)throw i}}return o}}(t,e)||i(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function i(e,n){if(e){if("string"==typeof e)return t(e,n);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?t(e,n):void 0}}var u=function(t){return Array.isArray(t)},a=function(t){return void 0!==t},o=function(t){return"function"==typeof t},s=function(t,e,n){return!(!t||"object"!=typeof t)&&(n?l(e)&&l(t.constructor)&&e===t.constructor:l(e)&&t instanceof e)},f=function(t){return"number"==typeof t},c=function(t,e){return void 0===e&&(e=!0),!(!t||"object"!=typeof t)&&(!e||s(t,Object,1))},l=function(t){return a(t)&&!function(t){return null===t}(t)},p=function(t){return"string"==typeof t},d=function(t,e){return-1!==e.indexOf(t)},h=function(){for(var t=arguments.length,e=Array(t),n=0;n<t;n++)e[n]=arguments[n];for(var r=e.shift(),i=0,a=b(e);i<a;++i)for(var o in e[i])if(l(r[o]))if(u(r[o])&&u(e[i][o])){r[o]=[].concat(r[o]);for(var s=0,f=b(e[i][o]);s<f;++s)d(e[i][o][s],r[o])||r[o].push(e[i][o][s])}else c(r[o])&&c(e[i][o])?r[o]=h({},r[o],e[i][o]):r[o]=e[i][o];else r[o]=e[i][o];return r},g=function(t){if(u(t))return t.map((function(e){return g(t)}));if(c(t)){for(var e in t)t[e]=g(t[e]);return t}return!1===t?"false":null===t?"null":!0===t?"true":""+t},_=function(t){return t.replace(/[-_.](\w)/g,(function(t,e){return m(e)}))},m=function(t){return t.toUpperCase()},b=function(t){return t.length},y=function(t){if(u(t))return t.map((function(t){return y(t)}));if(c(t)){for(var e in t)t[e]=y(t[e]);return t}return p(t)&&function(t){return/^[+-]?(?:\d*\.)?\d+$/.test(t+"")}(t)?"0"===t[0]&&-1===t.indexOf(".")?t:function(t,e){return void 0===e&&(e=10),e?parseInt(t,e):parseFloat(t)}(t):"false"!==t&&("null"===t?null:"true"===t||t)},k=function(t,e){for(var n,r=0,i=b(t);r<i;++r)if(-1!==(n=e(t[r],r))){if(0===n)break}else t.splice(r,1);return t},x=function(t,i){for(var u,a=e(t);!(u=a()).done;){var o=n(r,u.value,2),s=o[0],f=o[1];if(-1!==(f=i(f,s))){if(0===f)break}else D(s,t)}return t},w=function(t,e){var n;for(var r in t)if(-1!==(n=e(t[r],r))){if(0===n)break}else delete t[r];return t},j=function(t){return t.prototype},S=function(t){return A(t,N)||null},A=function(t,e){return e.get(t)},T=function(t,e){return e.has(t)},D=function(t,e){return e.delete(t)},C=function(t,e,n){return n||(t=j(t)),w(e,(function(e,n){Object.defineProperty(t,n,e)})),t},E=function(t,e,n){return t=j(t),w(e,(function(e,n){t[n]=e})),t},I=function(t,e){return M(t,e,N)},M=function(t,e,n){return n.set(t,e)},O=function(t){var e=[];return x(t,(function(t,n){e.push(n)})),e},R=function(t){return P(t).shift()},L=function(t){return P(t).pop()},P=function(t){var e=[];return x(t,(function(t){e.push(t)})),e},N=new WeakMap;function q(t){return Array.from(t)}var F=document,H=window,z=function(t,e,n){if(void 0===n&&(n=!0),!tt(t,e))return null;var r=t.getAttribute(e);return n?y(r):r},B=function(t,e,n){return V(t,e||0,n)},K=function(t,e){return t["first"+(e?"":"Element")+"Child"]||null},V=function(t,e,n){var r=q(t["child"+(n?"Nodes":"ren")]);return f(e)?r[e]||null:r},U=function(t,e){return void 0===e&&(e="e:"),nt(t)?z(t,"id"):(l(St[e])||(St[e]=0),e+(n=Date.now()+(St[e]+=1),r=16,f(n)?n.toString(r):""+n));var n,r},J=function(t,e){return t["next"+(e?"":"Element")+"Sibling"]||null},W=function(t,e){return e?t.closest(e)||null:t.parentNode||null},G=function(t){var e="form";return rt(t,e)&&e===function(t){return(t&&t.nodeName||"").toLowerCase()||null}(t[e])?t[e]:W(t,e)},Q=function(t,e){return t.previousElementSibling||null},X=function(t,e){void 0===e&&(e=!0);var n="textContent";if(!rt(t,n))return!1;var r=t[n];return""!==(r=e?r.trim():r)?r:null},Y=function(t){return t&&t.nodeType||null},Z=function(t,e){var n=(t.value||"").replace(/\r?\n|\r/g,"\n");return""!==n?n:null},tt=function(t,e){return t.hasAttribute(e)},et=function(t,e){return t.classList.contains(e)},nt=function(t){return tt(t,"id")},rt=function(t,e){return e in t},it=function(t,e){return ut(t,"aria-"+e)},ut=function(t,e){return t.removeAttribute(e),t},ot=function(t,e){return t.classList.remove(e),t},st=function(t){var e=W(t);return t.remove(),e},ft=function(t,e,n){return ct(t,"aria-"+e,!0===n?"true":n)},ct=function(t,e,n){return!0===n&&(n=e),t.setAttribute(e,g(n)),t},lt=function(t,e){return w(e,(function(e,n){return"aria"===n&&c(e)?(function(t,e){w(e,(function(e,n){e||""===e||0===e?ft(t,n,e):it(t,n)}))}(t,e),1):"class"===n?(dt(t,e),1):"data"===n&&c(e)?(ht(t,e),1):"style"===n&&c(e)?(xt(t,e),1):void(e||""===e||0===e?ct(t,n,e):ut(t,n))})),t},vt=function(t,e){return t.append(e),e},pt=function(t,e){return t.classList.add(e),t},dt=function(t,e){return u(e)?(k(e,(function(e){return pt(t,e)})),t):c(e)?(w(e,(function(e,n){return e?pt(t,n):ot(t,n)})),t):(t.className=e,t)},ht=function(t,e){return w(e,(function(e,n){e||""===e||0===e?gt(t,n,e):function(t,e){ut(t,"data-"+e)}(t,n)})),t},gt=function(t,e,n){return(u(n)||c(n))&&(n=JSON.stringify(n)),ct(t,"data-"+e,!0===n?"true":n)},_t=function(t,e,n,r){return t=p(t)?F.createElement(t,p(r)?{is:r}:r):t,u(e)&&b(e)?(!function(t){var e="innerHTML";rt(t,e)&&(t[e]="")}(t),k(e,(function(t){return vt(p(t)?mt(t):t)}))):c(e)&&(n=e,e=!1),p(e)&&bt(t,e),c(n)?(lt(t,n),t):t},mt=function(t){return p(t)&&(t=F.createTextNode(t)),t},bt=function(t,e,n){if(void 0===n&&(n=!0),null===e)return t;var r="innerHTML";return rt(t,r)&&(t[r]=n?e.trim():e),t},yt=function(t,e,n){return void 0===n&&(n="e:"),ct(t,"id",l(e)?e:U(t,n))},kt=function(t,e){return W(t).insertBefore(e,t),e},xt=function(t,e){return w(e,(function(e,n){e||""===e||0===e?function(t,e,n){f(n)&&(n+="px"),t.style[_(e)]=g(n)}(t,n,e):function(t,e){t.style[_(e)]=null}(t,n)})),t},wt=function(t,e,n){if(void 0===n&&(n=!0),null===e)return t;var r="textContent";return rt(t,r)&&(t[r]=n?e.trim():e),t},jt=function(t,e,n){return t.classList.toggle(e,n),t},St={},At=function(t,e){return function(){var n=arguments,r=this;setTimeout((function(){return t.apply(r,n)}),e)}};var Tt=function(t,e,n){e.removeEventListener(t,n)},Dt=function(t){return t&&t.preventDefault()},Ct=function(t,e,n,r){void 0===r&&(r=!1),e.addEventListener(t,n,r)},Et=function(){return F.getSelection()},It=function(){return F.createRange()},Mt=function(t,e){return(e=e||Et()).empty(),e},Ot=function(t,e,n){var r=0,i=It();i.setStart(t,0),i.collapse(!0);for(var u,a,o,s=[t];!u&&(o=s.pop());)if(3===Y(o)){var f=r+b(o);!a&&e[0]>=r&&e[0]<=f&&(i.setStart(o,e[0]-r),a=!0),a&&e[1]>=r&&e[1]<=f&&(u=!0,i.setEnd(o,e[1]-r)),r=f}else k(V(o,null,1),(function(t){return s.push(t)}));return Pt(t,i,Mt(0,n))},Rt=function(t,e,n){n=n||Et(),Mt(0,n);var r=It();r.selectNodeContents(t),n=Pt(t,r,n),1===e?n.collapseToEnd():-1===e&&n.collapseToStart()},Lt=function(t){return(t=t||Et()).rangeCount&&t.removeRange(t.getRangeAt(0)),t},Pt=function(t,e,n){return n=n||Et(),u(e)?Ot(t,e,n):(n.addRange(e),n)},Nt=function(t,e){return function(t){return s(t,RegExp)}(t)?t:RegExp(t,l(e)?e:"g")},$t="ArrowLeft",qt="ArrowRight",Ft="Home",Ht="Backspace",zt="End",Bt="Enter",Kt="TagPicker";function Vt(t){return t.focus(),t}function Ut(t){return z(t,"data-"+"value",!1)}var Jt=!1,Wt=!1;function Gt(t){Lt();var e=S(this);e._mask;var n=e._tags,r=e.mask,i=e.state.n;e._event=t,Jt||Wt||x(n,(function(t){return ot(t,i+"__tag--selected")})),ot(r,i+="--focus"),ot(r,i+="-tag")}function Qt(t){Lt();var e=S(this),n=e._mask,r=e.mask,i=e.state,u=n.text,a=i.n;e._event=t,ot(u,a+"__text--focus"),ot(r,a+="--focus"),ot(r,a+="-text"),e.fire("blur",[t])}function Xt(t){var e=this,n=S(e),r=n.state.n+"__tag--selected";n._event=t,pt(e,r),Vt(e),Rt(K(e))}function Yt(t){var e=S(this),n=e._tags,r=e.state,i=r.n+"__tag--selected",u=[];e._event=t,x(n,(function(t,e){et(t,i)&&u.push(e)})),t.clipboardData.setData("text/plain",u.join(r.join)),e.fire("copy",[t,u]).focus(),Dt(t)}function Zt(t){var e=S(this),n=e._mask,r=e._tags,i=e.state;n.input;var u=i.n+"__tag--selected",a=[];e._event=t,x(r,(function(t,n){et(t,u)&&(a.push(n),e.let(n,1))})),t.clipboardData.setData("text/plain",a.join(i.join)),e.fire("cut",[t,a]).fire("change",[t,Ut(this)]).focus(),Dt(t)}function te(t){var e=S(this),n=e._mask,r=e._tags,i=e.mask,u=e.self,a=e.state,o=n.hint,s=n.input,f=n.text,c=a.n;e._event=t,x(r,(function(t){return ot(t,c+"__tag--selected")})),pt(f,c+"__text--focus"),pt(i,c+="--focus"),pt(i,c+="-text"),At((function(){return wt(o,X(s,!1)?"":u.placeholder)}),1)(),e.focus().fire("focus",[t])}function ee(t){var e=S(this);e._event=t,e.focus()}function ne(t){var e=S(this);e._event=t,e.fire("min.tags",[t]).focus(),Dt(t)}function re(t){var e=S(this);e._mask;var n=e.mask,r=e.state.n;e._event=t,pt(n,r+="--focus"),pt(n,r+="-tag"),e.fire("focus.tag",[t])}function ie(t){var e,n=this,r=t.key,i=Jt=t.ctrlKey,u=Wt=t.shiftKey,a=S(n),o=a._mask,s=a._tags;a.mask;var f,c,l,v=a.state,p=o.text,d=Q(n),h=J(n),g=v.n+"__tag--selected";if(a._event=t,u)pt(n,g),Rt(K(n)),$t===r?(d&&(et(d,g)?ot(n,g):pt(d,g),Vt(d),Rt(K(d))),e=!0):qt===r&&(h&&p!==h&&(et(h,g)?ot(n,g):pt(h,g),Vt(h),Rt(K(h))),e=!0);else if(i)"a"===r?(x(s,(function(t){Vt(t),Rt(K(t)),pt(t,g)})),e=!0):$t===r?(d&&Vt(d),e=!0):qt===r?(h&&p!==h?Vt(h):a.focus(),e=!0):Bt!==r&&" "!==r||(jt(n,g),et(n,g)?(Vt(n),Rt(K(n))):Rt(K(L(s))),e=!0);else{var _=[];if(x(s,(function(t,e){et(t,g)&&_.push(e),n!==t&&ot(t,g)})),Ft===r)(f=R(s))&&Vt(f),e=!0;else if(zt===r)(c=L(s))&&Vt(c),e=!0;else if(Bt===r||" "===r)jt(n,g),et(n,g)?(Vt(n),Rt(K(n))):Rt(K(L(s))),e=!0;else if($t===r)d&&Vt(d),e=!0;else if(qt===r)h&&p!==h?Vt(h):a.focus(),e=!0;else if(Ht===r){if(a.let(l=Ut(n),1),b(_)>1)for(var m,y;y=_.pop();)d=(m=A(y,s))&&Q(m),a.let(y,1);a.fire("change",[t,l]),d?(Vt(d),Rt(K(d))):a.focus(),e=!0}else if("Delete"===r){if(a.let(l=Ut(n),1),b(_)>1)for(var k;k=_.shift();)h=A(k,s)&&J(k),a.let(k,1);a.fire("change",[t,l]),h&&p!==h?(Vt(h),Rt(K(h))):a.focus(),e=!0}else"Escape"===r||"Tab"===r?(a.focus(),e=!0):(a.focus(),e=!1)}e&&Dt(t)}function ue(t){var e=t.key,n=S(this),r=n._tags,i=n.state.n+"__tag--selected";if(n._event=t,Wt)if($t===e||qt===e);else{var u=0;x(r,(function(t){et(t,i)&&++u})),u<2&&ot(this,i)}Jt=Wt=!1}function ae(t){var e=t.data,n=S(this),r=n.state.escape,i=p(e)&&1===b(e)?e:0;if(n._event=t,"\n"===i&&(d("\n",r)||d(13,r))||"\t"===i&&(d("\t",r)||d(9,r))||d(i,r))return n.set(X(this)).focus().text="",Dt(t)}function oe(t){var e,n=this,r=t.key,i=t.keyCode,u=Jt=t.ctrlKey,a=Wt=t.shiftKey,s=S(n),f=s._active,c=s._mask,l=s._tags;s.mask;var v,p,h=s.self,g=s.state,_=c.hint,m=g.n+"__tag--selected";if(escape=g.escape,!f)return Dt(t);if(s._event=t,Bt===r&&(d("\n",escape)||d(13,escape))||"Tab"===r&&(d("\t",escape)||d(9,escape))||d(r,escape)||d(i,escape))return s.set(X(n)).focus().text="",Dt(t);At((function(){return wt(_,X(n,!1)?"":h.placeholder)}),1)();var b,y=""===function(t){var e,n=H.getSelection();if(n.rangeCount)return(e=n.getRangeAt(0).cloneRange()).collapse(!0),e.setStart(t,0),(e+"").slice(-1)}(n),k=null===X(n,!1);if(a)(k||y)&&$t===r&&(p=L(l))&&(p&&(Vt(p),Rt(K(p))),pt(p,m),e=!0);else if(u)"a"===r&&null===X(n,!1)&&null!==s.value?(x(l,(function(t){Vt(t),Rt(K(t)),pt(t,m)})),e=!0):Ft===r?((v=R(l))&&Vt(v),e=!0):zt===r||$t===r?((p=L(l))&&Vt(p),e=!0):Ht===r&&((p=L(l))&&s.let(Ut(p)),s.focus(),e=!0);else if(Bt===r){var w=G(h);if(w&&o(w.requestSubmit)){var j=(b="button:not([type]),button[type=submit],input[type=image],input[type=submit]",(w||F).querySelector(b));j?w.requestSubmit(j):w.requestSubmit()}e=!0}else k?Ft===r?((v=R(l))&&Vt(v),e=!0):zt===r||$t===r?((p=L(l))&&Vt(p),e=!0):Ht===r&&((p=L(l))&&s.let(Ut(p)),s.focus(),e=!0):y&&$t===r&&((p=L(l))&&Vt(p),e=!0);e&&Dt(t)}function se(t){S(this)._event=t,Jt=Wt=!1}function fe(t){var e=S(this),n=e._tags,r=e.state,i=r.n+"__tag--selected",u=!0,a=(t.clipboardData||H.clipboardData).getData("text")+"";e._event=t;try{x(n,(function(t){if(!et(t,i))throw u=!1,""}))}catch(t){}u&&e.value&&k(e.value.split(r.join),(function(t){return e.let(t,1)}));var o=a.split(r.join);k(o,(function(t){return e.set(t,1)})),e.fire("paste",[t,o]).focus().fire("change",[t]),Dt(t)}function ce(t){var e=this,n=S(e),r=n._mask,i=n.self,a=n.state,o=r.hint,s=(t.clipboardData||H.clipboardData).getData("text")+"";n._event=t,function(t,e,n,r){var i,a,o;if((r=r||Et()).rangeCount){var s,f,c;if((a=r.getRangeAt(0)).deleteContents(),o=F.createDocumentFragment(),p(e))for(i=_t("div"),bt(i,e);s=K(i,1);)c=vt(o,s);else u(e)?k(e,(function(t){return c=vt(o,t)})):c=vt(o,e);f=K(o,1),a.insertNode(o),c&&((a=a.cloneRange()).setStartAfter(c),a.setStartBefore(f),Pt(t,a,Lt(r)))}}(e,s),wt(o,X(e)?"":i.placeholder),At((function(){if(s=X(e),n.text="",s){var r=s.split(a.join);k(r,(function(t){return n.set(t,1)})),n.fire("paste",[t,r]).fire("change",[t])}}),1)(),Dt(t)}function le(t){var e=this,n=S(e),r=n._active,i=n._mask,u=n._tags,a=n.state,o=i.text,s=a.n+"__tag--selected";if(r){if(n._event=t,Vt(e),jt(e,s),Jt);else if(Wt){Lt();var f,c=W(e),l=(g="."+s,q((c||F).querySelectorAll(g))),v=l[0],p=l[b(l)-1];if(v!==p)for(;(f=J(v))&&o!==f&&v!==p;)pt(v=f,s)}else{Lt();var d=2===t.button,h=0;x(u,(function(t){et(t,s)&&++h,e===t||d||ot(t,s)})),h>0&&pt(e,s)}var g;et(e,s)?(Vt(e),Rt(K(e))):Rt(L(u)),n.fire("touch.tag",[t]),Dt(t),function(t){t&&t.stopPropagation()}(t)}}function ve(t){var e=this,n=W(e),r=S(n);r._event=t,Tt("mousedown",e,ve),Tt("touchstart",e,ve),r.let(Ut(n)).focus(),Dt(t)}function pe(t){var e=S(this);e._event=t,e.let().fire("reset",[t])}function de(t){var e=S(this),n=e._tags,r=e.state;return e._event=t,n.size<r.min?(e.fire("min.tags",[t]).focus(),Dt(t)):e.fire("submit",[t])}function he(t,e){var n=this;if(!t)return n;if(!s(n,he))return new he(t,e);I(t,function(t,e){return(e=e||t).fire=function(t,e,n){var r=this,i=r.hooks;return l(i[t])?(k(i[t],(function(t){t.apply(n||r,e)})),r):r},e.off=function(t,e){var n=this,r=n.hooks;if(!l(t))return r={},n;if(l(r[t]))if(l(e)){var i=b(r[t]);if(0===i)delete r[t];else for(var u=0;u<i;++u)if(e===r[t][u]){r[t].splice(u,1);break}}else delete r[t];return n},e.on=function(t,e){var n=this.hooks;return l(n[t])||(n[t]=[]),l(e)&&n[t].push(e),this},t.hooks={},t}(n,he._));var r=h({},he.state,p(e)?{join:e}:e||{});return c(e)&&e.escape&&(r.escape=e.escape),n.attach(t,r)}function ge(t,e){var n=this;return s(n,ge)?(n.of=t,n.values=new Map,e&&createTagsFrom(t,e,t._mask.flex),n):new ge(t,e)}return he._=E(he,{attach:function(t,e){var n=this;t=t||n.self,e&&p(e)&&(e={join:e}),e=h({},n.state,e||{}),n._event=null,n._tags=new ge(n),n._value=null,n.self=t,n.state=e;var r=e;r.max;var i=r.min,a=r.n,s=t.disabled,f=function(t){return t.readOnly}(t),v=function(t){return t.required}(t),d=t.placeholder,g=Z(t);n._active=!s&&!f,n._fix=f,v&&i<1&&(e.min=i=1);var _=G(t),m=_t("div",{aria:{disabled:!!s&&"true",multiselectable:"true",readonly:!!f&&"true"},class:a,role:"combobox"});n.mask=m;var b=_t("span",{class:a+"__flex",role:"group"}),y=_t("span",{class:a+"__text",tabindex:0}),x=_t("span",{aria:{disabled:!!s&&"true",multiline:"false",placeholder:d,readonly:!!f&&"true"},autocapitalize:"off",contenteditable:!s&&!f&&"",role:"textbox",spellcheck:"false",tabindex:!!f&&0}),w=_t("span",d+"",{role:"none"});vt(m,b),vt(b,y),vt(y,x),vt(y,w),I(x,n),Ct("beforeinput",x,ae),Ct("blur",x,Qt),Ct("cut",x,onCutTextInput),Ct("focus",x,te),Ct("keydown",x,oe),Ct("mousedown",m,onPointerDownMask),Ct("paste",x,ce),Ct("touchstart",m,onPointerDownMask),pt(t,a+"__self"),function(t,e){W(t).insertBefore(e,J(t,!0))}(t,m),Ct("focus",t,ee),Ct("invalid",t,ne),_&&(Ct("reset",_,pe),Ct("submit",_,de),yt(_),I(_,n)),t.tabIndex=-1,I(m,n);var j={};j.flex=b,j.hint=w,j.input=x,j.of=t,j.self=m,j.values=new Set,j.text=y,n._mask=j;var S,A=n._active,T=e.tags;return n._active=!0,T?S=createTagsFrom(of,T,of._mask.flex):g&&(S=createTagsFrom(of,g.split(e.join),of._mask.flex)),n._value=S.join(e.join),n._active=A,ft(t,"hidden",!0),ft(x,"controls",U(b)),yt(m),yt(b),yt(t),yt(x),yt(w),l(e)&&u(e.with)&&k(e.with,(function(r,i){p(r)&&(r=OptionPicker[r]),o(r)?r.call(n,t,e):c(r)&&o(r.attach)&&r.attach.call(n,t,e)})),n},blur:function(){Lt();var t=this._mask,i=t.input;return function(t,i){for(var u,a=e(t.entries());!(u=a()).done;){var o=n(r,u.value,2),s=o[0],f=o[1];if(-1!==(f=i(f,s))){if(0===f)break}else D(s,t)}}(t.values,(function(t){return t.blur()})),i.blur()},detach:function(){var t=this,e=t._mask,n=t.mask,r=t.self,i=t.state,a=e.input,s=G(r);return t._active=!1,t._tags=new ge(t),t._value=null,s&&(Tt("reset",s,pe),Tt("submit",s,de)),Tt("beforeinput",a,ae),Tt("blur",a,Qt),Tt("cut",a,onCutTextInput),Tt("focus",a,te),Tt("focus",r,ee),Tt("invalid",r,ne),Tt("keydown",a,oe),Tt("keyup",a,se),Tt("mousedown",n,onPointerDownMask),Tt("paste",a,ce),Tt("touchstart",n,onPointerDownMask),u(i.with)&&k(i.with,(function(e,n){p(e)&&(e=OptionPicker[e]),c(e)&&o(e.detach)&&e.detach.call(t,r,i)})),r.tabIndex=null,it(r,"hidden"),ot(r,i.n+"__self"),st(n),t._mask={of:r},t.mask=null,t},focus:function(t){var e=this._mask.input;return Vt(e),Rt(e,t),this},reset:function(t,e){}}),he.from=function(t,e){return new he(t,e)},he.of=S,he.state={escape:[","],join:", ",max:1/0,min:0,n:"tag-picker",pattern:null,tags:null,with:[]},he.version="4.1.0",C(he,{name:{value:Kt}},1),C(he,{active:{get:function(){return this._active},set:function(t){return $}},fix:{get:function(){return this._fix},set:function(t){return $}},max:{get:function(){},set:function(t){return $}},min:{get:function(){},set:function(t){return $}},tags:{get:function(){return this._tags},set:function(t){var e=[];return x($._tags,(function(t){return e.push(Ut(t[2]))})),$.fire("set.tags",[e])}},text:{get:function(){return X(this._mask.input)},set:function(t){var e,n=this,r=n._active,i=n._mask,u=i.hint,a=i.input;return r?(wt(a,e=fromValue(t)),e?setStyle(u,"color","transparent"):letStyle(u,"color"),n):n}},value:{get:function(){var t=Z(this.self);return""!==t?t:null},set:function(t){var e=this,n=e.state;return e.value&&k(e.value.split(n.join),(function(t){return e.let(t,0)})),k(t.split(n.join),(function(t){return e.set(t,0)})),e}}}),C(ge,{name:{value:Kt+"Tags"}},1),E(ge,{_valid:function(t){var e=this.state;return(t||"").replace(/[^ -~]/g," ").split(e.join).join("").replace(/\s+/g," ").trim()},at:function(t){return A(toValue(t),this.values)},count:function(){return toMapCount(this.values)},delete:function(t,e,n){var r=this,i=r._active,s=r._event,f=r._let,c=r._tags,l=r._value,p=r.self,d=r.state;if(!i)return r;if(!a(v))return r.value&&k(r.value.split(d.join),(function(t){return r.let(t,1)})),k(l.split(d.join),(function(t){return r.set(t,1)})),r.fire("change",[s]);if(u(v)||(v=[v,v]),c.size<d.min+1)return r.fire("min.tags",[s,v[0]]);if(!T(v[0],c))return r.fire("not.tag",[s,v[0]]);r.fire("is.tag",[s,v[0]]);var h=A(v[0],c);B(h,0);var g=B(h,1);return o(f)&&f.call(r,h),Tt("blur",h,Gt),Tt("contextmenu",h,Xt),Tt("copy",h,Yt),Tt("cut",h,Zt),Tt("focus",h,re),Tt("keydown",h,ie),Tt("keyup",h,ue),Tt("mousedown",h,le),Tt("mousedown",g,ve),Tt("paste",h,fe),Tt("touchstart",h,le),Tt("touchstart",g,ve),st(h),D(v[0],r._tags),p.value=O(r._tags).join(d.join),r.fire("let.tag",[s,v[0]]),_skipHookChange||r.fire("change",[s,v[0]]),r},get:function(t){var e=this.values,n=A(toValue(t),e);return n?getElementIndex(n[2]):-1},has:function(t){return T(toValue(t),this.values)},let:function(t,e){return void 0===e&&(e=1),this.delete(t,1,e)},set:function(t,e,n){var r,i=this,a=i._active,s=i._event,c=i._mask,l=i._set,d=i._tags,h=i._valid,g=i.self,_=i.state,m=c.text,b=_.n,y=_.pattern;if(!a&&!_attach)return i;if(u(v)||(v=[v,v]),d.size>=_.max)return i.fire("max.tags",[s,v[0]]);if(o(h)&&(v[0]=h.call(i,v[0])),""===v[0]||p(y)&&!Nt(y).test(v[0]))return i.fire("not.tag",[s,v[0]]);if(T(v[0],d))return i.fire("has.tag",[s,v[0]]);i.fire("is.tag",[s,v[0]]);var x=_t("span",{class:b+"__tag","data-value":v[0],tabindex:!!a&&-1}),w=_t("span",(null!=(r=v[1])?r:v[0]).replace(/&/g,"&amp;").replace(/>/g,"&gt;").replace(/</g,"&lt;")),j=_t("span",{class:b+"__x",tabindex:-1});if(a&&(Ct("blur",x,Gt),Ct("contextmenu",x,Xt),Ct("copy",x,Yt),Ct("cut",x,Zt),Ct("focus",x,re),Ct("keydown",x,ie),Ct("keyup",x,ue),Ct("mousedown",x,le),Ct("mousedown",j,ve),Ct("paste",x,fe),Ct("touchstart",x,le),Ct("touchstart",j,ve),I(x,i)),vt(x,w),vt(x,j),function(t){return f(t)&&0==t%1}(at)&&at>=0){var S=O(d);S.splice(at,0,v[0]),i._tags=new Map,M(v[0],x,d),o(l)&&l.call(i,x),k(S,(function(t){var e;M(t,e=A(t,d),i._tags),kt(m,e)}))}else M(v[0],x,i._tags),o(l)&&l.call(i,x),kt(m,x);return g.value=O(i._tags).join(_.join),i.fire("set.tag",[s,v[0]]),_skipHookChange||i.fire("change",[s,v[0]]),i}}),j(ge)[Symbol.iterator]=function(){return this.values[Symbol.iterator]()},he.Tags=ge,he}));