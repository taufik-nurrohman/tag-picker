/*!
 *
 * The MIT License (MIT)
 *
 * Copyright © 2024 Taufik Nurrohman <https://github.com/taufik-nurrohman>
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the “Software”), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in all
 * copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED “AS IS”, WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
 * SOFTWARE.
 *
 */
!function(u,D){"object"==typeof exports&&"undefined"!=typeof module?module.exports=D():"function"==typeof define&&define.amd?define(D):(u="undefined"!=typeof globalThis?globalThis:u||self).TagPicker=D()}(this,(function(){"use strict";var u=function(u,D){return-1!==D.indexOf(u)},D=function(u){return Array.isArray(u)},F=function(u){return void 0!==u},t=function(u){return"function"==typeof u},e=function(u,D){return u&&i(D)&&u instanceof D},n=function(u){return"number"==typeof u},r=function(u,D){return void 0===D&&(D=!0),"object"==typeof u&&(!D||e(u,Object))},i=function(u){return F(u)&&!function(u){return null===u}(u)},E=function(u){return"string"==typeof u},a=function(u){return u.length},C=function(u){return a(s(u))},s=function(u){return Object.keys(u)},o=function(u){return Object.values(u)},A=function u(F){if(D(F))return F.map((function(D){return u(D)}));if(function(u){return/^-?(?:\d*.)?\d+$/.test(u+"")}(F))return function(u,D){return void 0===D&&(D=10),D?parseInt(u,D):parseFloat(u)}(F);if(r(F)){for(var t in F)F[t]=u(F[t]);return F}return"false"!==F&&("null"===F?null:"true"===F||F)},f=function F(){for(var t=arguments.length,e=Array(t),n=0;n<t;n++)e[n]=arguments[n];for(var E=e.shift(),C=0,s=a(e);C<s;++C)for(var o in e[C])if(i(E[o]))if(D(E[o])&&D(e[C][o])){E[o]=[].concat(E[o]);for(var A=0,f=a(e[C][o]);A<f;++A)u(e[C][o][A],E[o])||E[o].push(e[C][o][A])}else r(E[o])&&r(e[C][o])?E[o]=F({},E[o],e[C][o]):E[o]=e[C][o];else E[o]=e[C][o];return E},c=function u(F){if(D(F))return F.map((function(D){return u(F)}));if(r(F)){for(var t in F)F[t]=u(F[t]);return F}return!1===F?"false":null===F?"null":!0===F?"true":""+F},l=document,B=window,p=function(u){return u.firstElementChild||null},v=function(u,D){var F=u.children;return n(D)?F[D]||null:F||[]},h=function(u,D){return u["next"+(D?"":"Element")+"Sibling"]||null},_=function(u,D){return D?u.closest(D)||null:u.parentNode||null},g=function(u){var D="form";return x(u,D)&&D===function(u){return(u&&u.nodeName||"").toLowerCase()||null}(u[D])?u[D]:_(u,D)},d=function(u,D){return u.previousElementSibling||null},m=function(u,D){void 0===D&&(D=!0);var F="textContent";if(!x(u,F))return!1;var t=u[F];return""!==(t=D?t.trim():t)?t:null},k=function(u,D){return u.hasAttribute(D)},b=function(u,D){return u.classList.contains(D)},x=function(u,D){return D in u},y=function(u,D){return u.removeAttribute(D),u},j=function(u,D){return u.classList.remove(D),u},w=function(u){var D=_(u);return u.remove(),D},S=function(u,D,F){return!0===F&&(F=D),u.setAttribute(D,c(F)),u},T=function(u,D){return u.append(D),D},R=function(u,D){return u.classList.add(D),u},L=function(u,D,F){return u=E(u)?l.createElement(u):u,r(D)&&(F=D,D=!1),E(D)&&O(u,D),r(F)&&function(u,D){var F;for(var t in D)(F=D[t])||""===F||0===F?S(u,t,F):y(u,t)}(u,F),u},O=function(u,D,F){if(void 0===F&&(F=!0),null===D)return u;var t="innerHTML";return x(u,t)&&(u[t]=F?D.trim():D),u},q=function(u,D){return _(u).insertBefore(D,u),D},N=function(u,D,F){if(void 0===F&&(F=!0),null===D)return u;var t="textContent";return x(u,t)&&(u[t]=F?D.trim():D),u},K=function(u,D,F){return u.classList.toggle(D,F),u},P=function(u,D){return function(){var F=arguments,t=this;setTimeout((function(){return u.apply(t,F)}),D)}};var I=function(u,D,F){D.removeEventListener(u,F)},H=function(u){return u&&u.preventDefault()},M=function(u,D,F,t){void 0===t&&(t=!1),D.addEventListener(u,F,t)},$=function(u,D){return function(u){return e(u,RegExp)}(u)?u:RegExp(u,i(D)?D:"g")},z="ArrowLeft",G="ArrowRight",J="Home",Q="Backspace",U="End",V="Enter",W="TagPicker";function X(u,D,F){Object.defineProperty(u,D,F)}function Y(u){u.focus()}function Z(u){var D,F=B.getSelection();if(F.rangeCount)return(D=F.getRangeAt(0).cloneRange()).collapse(!0),D.setStart(u,0),(D+"").slice(-1)}function uu(u){return(u.value||function(u,D,F){if(void 0===F&&(F=!0),!k(u,D))return null;var t=u.getAttribute(D);return F?A(t):t}(u,"value",!1)||"").replace(/\r/g,"")}function Du(u){return u.disabled}function Fu(u){var D=l.getSelection();D.rangeCount&&D.removeRange(D.getRangeAt(0))}function tu(u,D){var F=l.getSelection();Fu();var t=l.createRange();t.selectNodeContents(u),F.addRange(t),1===D?F.collapseToEnd():-1===D&&F.collapseToStart()}function eu(u,D){var F=this;if(!u)return F;if(!e(F,eu))return new eu(u,D);u["_"+W]=function(u,D){return(D=D||u).fire=function(u,D){var F=this,t=F.hooks;return i(t[u])?(t[u].forEach((function(u){return u.apply(F,D)})),F):F},D.off=function(u,D){var F=this,t=F.hooks;if(!i(u))return t={},F;if(i(t[u]))if(i(D)){var e=t[u].length;if(0===e)delete t[u];else for(var n=0;n<e;++n)if(D===t[u][n]){t[u].splice(n,1);break}}else delete t[u];return F},D.on=function(u,D){var F=this.hooks;return i(F[u])||(F[u]=[]),i(D)&&F[u].push(D),this},u.hooks={},u}(F,eu.prototype);var t=f({},eu.state,E(D)?{join:D}:D||{});return r(D)&&D.escape&&(t.escape=D.escape),F.attach(u,t)}eu.state={escape:[","],join:", ",max:1/0,min:0,n:"tag-picker",pattern:null,with:[]},eu.version="4.0.1",X(eu,"name",{value:W});var nu=eu.prototype;X(nu,"text",{get:function(){return m(this._mask.input)},set:function(u){var D=this._mask,F=this.self,t=D.hint,e=D.input;N(t,""===(u+="")?F.placeholder:""),N(e,u),tu(e)}}),X(nu,"value",{get:function(){return this.self.value||null},set:function(u){var D=this;D._tags;var F=D.state;D.value&&D.value.split(F.join).forEach((function(u){return D.let(u,1)})),u.split(F.join).forEach((function(u){return D.set(u,-1,1)})),D.fire("change")}}),nu._filter=function(u){var D=this.state;return(u||"").replace(/(?:[\0- \x7F-\xA0\xAD\u0300-\u036F\u0378\u0379\u0380-\u0383\u038B\u038D\u03A2\u0483-\u0489\u0530\u0557\u0558\u058B\u058C\u0590-\u05BD\u05BF\u05C1\u05C2\u05C4\u05C5\u05C7-\u05CF\u05EB-\u05EE\u05F5-\u0605\u0610-\u061A\u061C\u064B-\u065F\u0670\u06D6-\u06DD\u06DF-\u06E4\u06E7\u06E8\u06EA-\u06ED\u070E\u070F\u0711\u0730-\u074C\u07A6-\u07B0\u07B2-\u07BF\u07EB-\u07F3\u07FB-\u07FD\u0816-\u0819\u081B-\u0823\u0825-\u0827\u0829-\u082F\u083F\u0859-\u085D\u085F\u086B-\u086F\u088F-\u089F\u08CA-\u0903\u093A-\u093C\u093E-\u094F\u0951-\u0957\u0962\u0963\u0981-\u0984\u098D\u098E\u0991\u0992\u09A9\u09B1\u09B3-\u09B5\u09BA-\u09BC\u09BE-\u09CD\u09CF-\u09DB\u09DE\u09E2-\u09E5\u09FE-\u0A04\u0A0B-\u0A0E\u0A11\u0A12\u0A29\u0A31\u0A34\u0A37\u0A3A-\u0A58\u0A5D\u0A5F-\u0A65\u0A70\u0A71\u0A75\u0A77-\u0A84\u0A8E\u0A92\u0AA9\u0AB1\u0AB4\u0ABA-\u0ABC\u0ABE-\u0ACF\u0AD1-\u0ADF\u0AE2-\u0AE5\u0AF2-\u0AF8\u0AFA-\u0B04\u0B0D\u0B0E\u0B11\u0B12\u0B29\u0B31\u0B34\u0B3A-\u0B3C\u0B3E-\u0B5B\u0B5E\u0B62-\u0B65\u0B78-\u0B82\u0B84\u0B8B-\u0B8D\u0B91\u0B96-\u0B98\u0B9B\u0B9D\u0BA0-\u0BA2\u0BA5-\u0BA7\u0BAB-\u0BAD\u0BBA-\u0BCF\u0BD1-\u0BE5\u0BFB-\u0C04\u0C0D\u0C11\u0C29\u0C3A-\u0C3C\u0C3E-\u0C57\u0C5B\u0C5C\u0C5E\u0C5F\u0C62-\u0C65\u0C70-\u0C76\u0C81-\u0C83\u0C8D\u0C91\u0CA9\u0CB4\u0CBA-\u0CBC\u0CBE-\u0CDC\u0CDF\u0CE2-\u0CE5\u0CF0\u0CF3-\u0D03\u0D0D\u0D11\u0D3B\u0D3C\u0D3E-\u0D4D\u0D50-\u0D53\u0D57\u0D62-\u0D65\u0D80-\u0D84\u0D97-\u0D99\u0DB2\u0DBC\u0DBE\u0DBF\u0DC7-\u0DE5\u0DF0-\u0DF3\u0DF5-\u0E00\u0E31\u0E34-\u0E3E\u0E47-\u0E4E\u0E5C-\u0E80\u0E83\u0E85\u0E8B\u0EA4\u0EA6\u0EB1\u0EB4-\u0EBC\u0EBE\u0EBF\u0EC5\u0EC7-\u0ECF\u0EDA\u0EDB\u0EE0-\u0EFF\u0F18\u0F19\u0F35\u0F37\u0F39\u0F3E\u0F3F\u0F48\u0F6D-\u0F84\u0F86\u0F87\u0F8D-\u0FBD\u0FC6\u0FCD\u0FDB-\u0FFF\u102B-\u103E\u1056-\u1059\u105E-\u1060\u1062-\u1064\u1067-\u106D\u1071-\u1074\u1082-\u108D\u108F\u109A-\u109D\u10C6\u10C8-\u10CC\u10CE\u10CF\u1249\u124E\u124F\u1257\u1259\u125E\u125F\u1289\u128E\u128F\u12B1\u12B6\u12B7\u12BF\u12C1\u12C6\u12C7\u12D7\u1311\u1316\u1317\u135B-\u135F\u137D-\u137F\u139A-\u139F\u13F6\u13F7\u13FE\u13FF\u1680\u169D-\u169F\u16F9-\u16FF\u1712-\u171E\u1732-\u1734\u1737-\u173F\u1752-\u175F\u176D\u1771-\u177F\u17B4-\u17D3\u17DD-\u17DF\u17EA-\u17EF\u17FA-\u17FF\u180B-\u180F\u181A-\u181F\u1879-\u187F\u1885\u1886\u18A9\u18AB-\u18AF\u18F6-\u18FF\u191F-\u193F\u1941-\u1943\u196E\u196F\u1975-\u197F\u19AC-\u19AF\u19CA-\u19CF\u19DB-\u19DD\u1A17-\u1A1D\u1A55-\u1A7F\u1A8A-\u1A8F\u1A9A-\u1A9F\u1AAE-\u1B04\u1B34-\u1B44\u1B4D-\u1B4F\u1B6B-\u1B73\u1B7F-\u1B82\u1BA1-\u1BAD\u1BE6-\u1BFB\u1C24-\u1C3A\u1C4A-\u1C4C\u1C89-\u1C8F\u1CBB\u1CBC\u1CC8-\u1CD2\u1CD4-\u1CE8\u1CED\u1CF4\u1CF7-\u1CF9\u1CFB-\u1CFF\u1DC0-\u1DFF\u1F16\u1F17\u1F1E\u1F1F\u1F46\u1F47\u1F4E\u1F4F\u1F58\u1F5A\u1F5C\u1F5E\u1F7E\u1F7F\u1FB5\u1FC5\u1FD4\u1FD5\u1FDC\u1FF0\u1FF1\u1FF5\u1FFF-\u200F\u2028-\u202F\u205F-\u206F\u2072\u2073\u208F\u209D-\u209F\u20C1-\u20FF\u218C-\u218F\u2427-\u243F\u244B-\u245F\u2B74\u2B75\u2B96\u2CEF-\u2CF1\u2CF4-\u2CF8\u2D26\u2D28-\u2D2C\u2D2E\u2D2F\u2D68-\u2D6E\u2D71-\u2D7F\u2D97-\u2D9F\u2DA7\u2DAF\u2DB7\u2DBF\u2DC7\u2DCF\u2DD7\u2DDF-\u2DFF\u2E5E-\u2E7F\u2E9A\u2EF4-\u2EFF\u2FD6-\u2FEF\u3000\u302A-\u302F\u3040\u3097-\u309A\u3100-\u3104\u3130\u318F\u31E4-\u31EE\u321F\uA48D-\uA48F\uA4C7-\uA4CF\uA62C-\uA63F\uA66F-\uA672\uA674-\uA67D\uA69E\uA69F\uA6F0\uA6F1\uA6F8-\uA6FF\uA7CB-\uA7CF\uA7D2\uA7D4\uA7DA-\uA7F1\uA802\uA806\uA80B\uA823-\uA827\uA82C-\uA82F\uA83A-\uA83F\uA878-\uA881\uA8B4-\uA8CD\uA8DA-\uA8F1\uA8FF\uA926-\uA92D\uA947-\uA95E\uA97D-\uA983\uA9B3-\uA9C0\uA9CE\uA9DA-\uA9DD\uA9E5\uA9FF\uAA29-\uAA3F\uAA43\uAA4C-\uAA4F\uAA5A\uAA5B\uAA7B-\uAA7D\uAAB0\uAAB2-\uAAB4\uAAB7\uAAB8\uAABE\uAABF\uAAC1\uAAC3-\uAADA\uAAEB-\uAAEF\uAAF5-\uAB00\uAB07\uAB08\uAB0F\uAB10\uAB17-\uAB1F\uAB27\uAB2F\uAB6C-\uAB6F\uABE3-\uABEA\uABEC-\uABEF\uABFA-\uABFF\uD7A4-\uD7AF\uD7C7-\uD7CA\uD7FC-\uD7FF\uE000-\uF8FF\uFA6E\uFA6F\uFADA-\uFAFF\uFB07-\uFB12\uFB18-\uFB1C\uFB1E\uFB37\uFB3D\uFB3F\uFB42\uFB45\uFBC3-\uFBD2\uFD90\uFD91\uFDC8-\uFDCE\uFDD0-\uFDEF\uFE00-\uFE0F\uFE1A-\uFE2F\uFE53\uFE67\uFE6C-\uFE6F\uFE75\uFEFD-\uFF00\uFFBF-\uFFC1\uFFC8\uFFC9\uFFD0\uFFD1\uFFD8\uFFD9\uFFDD-\uFFDF\uFFE7\uFFEF-\uFFFB\uFFFE\uFFFF]|\uD800[\uDC0C\uDC27\uDC3B\uDC3E\uDC4E\uDC4F\uDC5E-\uDC7F\uDCFB-\uDCFF\uDD03-\uDD06\uDD34-\uDD36\uDD8F\uDD9D-\uDD9F\uDDA1-\uDDCF\uDDFD-\uDE7F\uDE9D-\uDE9F\uDED1-\uDEE0\uDEFC-\uDEFF\uDF24-\uDF2C\uDF4B-\uDF4F\uDF76-\uDF7F\uDF9E\uDFC4-\uDFC7\uDFD6-\uDFFF]|\uD801[\uDC9E\uDC9F\uDCAA-\uDCAF\uDCD4-\uDCD7\uDCFC-\uDCFF\uDD28-\uDD2F\uDD64-\uDD6E\uDD7B\uDD8B\uDD93\uDD96\uDDA2\uDDB2\uDDBA\uDDBD-\uDDFF\uDF37-\uDF3F\uDF56-\uDF5F\uDF68-\uDF7F\uDF86\uDFB1\uDFBB-\uDFFF]|\uD802[\uDC06\uDC07\uDC09\uDC36\uDC39-\uDC3B\uDC3D\uDC3E\uDC56\uDC9F-\uDCA6\uDCB0-\uDCDF\uDCF3\uDCF6-\uDCFA\uDD1C-\uDD1E\uDD3A-\uDD3E\uDD40-\uDD7F\uDDB8-\uDDBB\uDDD0\uDDD1\uDE01-\uDE0F\uDE14\uDE18\uDE36-\uDE3F\uDE49-\uDE4F\uDE59-\uDE5F\uDEA0-\uDEBF\uDEE5-\uDEEA\uDEF7-\uDEFF\uDF36-\uDF38\uDF56\uDF57\uDF73-\uDF77\uDF92-\uDF98\uDF9D-\uDFA8\uDFB0-\uDFFF]|\uD803[\uDC49-\uDC7F\uDCB3-\uDCBF\uDCF3-\uDCF9\uDD24-\uDD2F\uDD3A-\uDE5F\uDE7F\uDEAA-\uDEAC\uDEAE\uDEAF\uDEB2-\uDEFF\uDF28-\uDF2F\uDF46-\uDF50\uDF5A-\uDF6F\uDF82-\uDF85\uDF8A-\uDFAF\uDFCC-\uDFDF\uDFF7-\uDFFF]|\uD804[\uDC00-\uDC02\uDC38-\uDC46\uDC4E-\uDC51\uDC70\uDC73\uDC74\uDC76-\uDC82\uDCB0-\uDCBA\uDCBD\uDCC2-\uDCCF\uDCE9-\uDCEF\uDCFA-\uDD02\uDD27-\uDD35\uDD45\uDD46\uDD48-\uDD4F\uDD73\uDD77-\uDD82\uDDB3-\uDDC0\uDDC9-\uDDCC\uDDCE\uDDCF\uDDE0\uDDF5-\uDDFF\uDE12\uDE2C-\uDE37\uDE3E\uDE41-\uDE7F\uDE87\uDE89\uDE8E\uDE9E\uDEAA-\uDEAF\uDEDF-\uDEEF\uDEFA-\uDF04\uDF0D\uDF0E\uDF11\uDF12\uDF29\uDF31\uDF34\uDF3A-\uDF3C\uDF3E-\uDF4F\uDF51-\uDF5C\uDF62-\uDFFF]|\uD805[\uDC35-\uDC46\uDC5C\uDC5E\uDC62-\uDC7F\uDCB0-\uDCC3\uDCC8-\uDCCF\uDCDA-\uDD7F\uDDAF-\uDDC0\uDDDC-\uDDFF\uDE30-\uDE40\uDE45-\uDE4F\uDE5A-\uDE5F\uDE6D-\uDE7F\uDEAB-\uDEB7\uDEBA-\uDEBF\uDECA-\uDEFF\uDF1B-\uDF2F\uDF47-\uDFFF]|\uD806[\uDC2C-\uDC3A\uDC3C-\uDC9F\uDCF3-\uDCFE\uDD07\uDD08\uDD0A\uDD0B\uDD14\uDD17\uDD30-\uDD3E\uDD40\uDD42\uDD43\uDD47-\uDD4F\uDD5A-\uDD9F\uDDA8\uDDA9\uDDD1-\uDDE0\uDDE4-\uDDFF\uDE01-\uDE0A\uDE33-\uDE39\uDE3B-\uDE3E\uDE47-\uDE4F\uDE51-\uDE5B\uDE8A-\uDE99\uDEA3-\uDEAF\uDEF9-\uDEFF\uDF0A-\uDFFF]|\uD807[\uDC09\uDC2F-\uDC3F\uDC46-\uDC4F\uDC6D-\uDC6F\uDC90-\uDCFF\uDD07\uDD0A\uDD31-\uDD45\uDD47-\uDD4F\uDD5A-\uDD5F\uDD66\uDD69\uDD8A-\uDD97\uDD99-\uDD9F\uDDAA-\uDEDF\uDEF3-\uDEF6\uDEF9-\uDF01\uDF03\uDF11\uDF34-\uDF42\uDF5A-\uDFAF\uDFB1-\uDFBF\uDFF2-\uDFFE]|\uD808[\uDF9A-\uDFFF]|\uD809[\uDC6F\uDC75-\uDC7F\uDD44-\uDFFF]|[\uD80A\uD80E-\uD810\uD812-\uD819\uD824-\uD82A\uD82D\uD82E\uD830-\uD832\uD83F\uD87C\uD87D\uD87F\uD889-\uDBFF][\uDC00-\uDFFF]|\uD80B[\uDC00-\uDF8F\uDFF3-\uDFFF]|\uD80D[\uDC30-\uDC40\uDC47-\uDFFF]|\uD811[\uDE47-\uDFFF]|\uD81A[\uDE39-\uDE3F\uDE5F\uDE6A-\uDE6D\uDEBF\uDECA-\uDECF\uDEEE-\uDEF4\uDEF6-\uDEFF\uDF30-\uDF36\uDF46-\uDF4F\uDF5A\uDF62\uDF78-\uDF7C\uDF90-\uDFFF]|\uD81B[\uDC00-\uDE3F\uDE9B-\uDEFF\uDF4B-\uDF4F\uDF51-\uDF92\uDFA0-\uDFDF\uDFE4-\uDFFF]|\uD821[\uDFF8-\uDFFF]|\uD823[\uDCD6-\uDCFF\uDD09-\uDFFF]|\uD82B[\uDC00-\uDFEF\uDFF4\uDFFC\uDFFF]|\uD82C[\uDD23-\uDD31\uDD33-\uDD4F\uDD53\uDD54\uDD56-\uDD63\uDD68-\uDD6F\uDEFC-\uDFFF]|\uD82F[\uDC6B-\uDC6F\uDC7D-\uDC7F\uDC89-\uDC8F\uDC9A\uDC9B\uDC9D\uDC9E\uDCA0-\uDFFF]|\uD833[\uDC00-\uDF4F\uDFC4-\uDFFF]|\uD834[\uDCF6-\uDCFF\uDD27\uDD28\uDD65-\uDD69\uDD6D-\uDD82\uDD85-\uDD8B\uDDAA-\uDDAD\uDDEB-\uDDFF\uDE42-\uDE44\uDE46-\uDEBF\uDED4-\uDEDF\uDEF4-\uDEFF\uDF57-\uDF5F\uDF79-\uDFFF]|\uD835[\uDC55\uDC9D\uDCA0\uDCA1\uDCA3\uDCA4\uDCA7\uDCA8\uDCAD\uDCBA\uDCBC\uDCC4\uDD06\uDD0B\uDD0C\uDD15\uDD1D\uDD3A\uDD3F\uDD45\uDD47-\uDD49\uDD51\uDEA6\uDEA7\uDFCC\uDFCD]|\uD836[\uDE00-\uDE36\uDE3B-\uDE6C\uDE75\uDE84\uDE8C-\uDFFF]|\uD837[\uDC00-\uDEFF\uDF1F-\uDF24\uDF2B-\uDFFF]|\uD838[\uDC00-\uDC2F\uDC6E-\uDCFF\uDD2D-\uDD36\uDD3E\uDD3F\uDD4A-\uDD4D\uDD50-\uDE8F\uDEAE-\uDEBF\uDEEC-\uDEEF\uDEFA-\uDEFE\uDF00-\uDFFF]|\uD839[\uDC00-\uDCCF\uDCEC-\uDCEF\uDCFA-\uDFDF\uDFE7\uDFEC\uDFEF\uDFFF]|\uD83A[\uDCC5\uDCC6\uDCD0-\uDCFF\uDD44-\uDD4A\uDD4C-\uDD4F\uDD5A-\uDD5D\uDD60-\uDFFF]|\uD83B[\uDC00-\uDC70\uDCB5-\uDD00\uDD3E-\uDDFF\uDE04\uDE20\uDE23\uDE25\uDE26\uDE28\uDE33\uDE38\uDE3A\uDE3C-\uDE41\uDE43-\uDE46\uDE48\uDE4A\uDE4C\uDE50\uDE53\uDE55\uDE56\uDE58\uDE5A\uDE5C\uDE5E\uDE60\uDE63\uDE65\uDE66\uDE6B\uDE73\uDE78\uDE7D\uDE7F\uDE8A\uDE9C-\uDEA0\uDEA4\uDEAA\uDEBC-\uDEEF\uDEF2-\uDFFF]|\uD83C[\uDC2C-\uDC2F\uDC94-\uDC9F\uDCAF\uDCB0\uDCC0\uDCD0\uDCF6-\uDCFF\uDDAE-\uDDE5\uDE03-\uDE0F\uDE3C-\uDE3F\uDE49-\uDE4F\uDE52-\uDE5F\uDE66-\uDEFF]|\uD83D[\uDED8-\uDEDB\uDEED-\uDEEF\uDEFD-\uDEFF\uDF77-\uDF7A\uDFDA-\uDFDF\uDFEC-\uDFEF\uDFF1-\uDFFF]|\uD83E[\uDC0C-\uDC0F\uDC48-\uDC4F\uDC5A-\uDC5F\uDC88-\uDC8F\uDCAE\uDCAF\uDCB2-\uDCFF\uDE54-\uDE5F\uDE6E\uDE6F\uDE7D-\uDE7F\uDE89-\uDE8F\uDEBE\uDEC6-\uDECD\uDEDC-\uDEDF\uDEE9-\uDEEF\uDEF9-\uDEFF\uDF93\uDFCB-\uDFEF\uDFFA-\uDFFF]|\uD869[\uDEE0-\uDEFF]|\uD86D[\uDF3A-\uDF3F]|\uD86E[\uDC1E\uDC1F]|\uD873[\uDEA2-\uDEAF]|\uD87A[\uDFE1-\uDFEF]|\uD87B[\uDE5E-\uDFFF]|\uD87E[\uDE1E-\uDFFF]|\uD884[\uDF4B-\uDF4F]|\uD888[\uDFB0-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])/g," ").split(D.join).join("").replace(/\s+/g," ").trim()};var ru=!1,iu=!1;function Eu(){Fu();var u=this["_"+W];u._mask;var D=u._tags,F=u.mask,t=u.state.n;if(!ru&&!iu)for(var e in D)j(D[e],t+"__tag--selected");j(F,t+="--focus"),j(F,t+="-tag")}function au(u){Fu();var D=this["_"+W],F=D._mask,t=D.mask,e=D.state,n=F.text,r=e.n;j(n,r+"__text--focus"),j(t,r+="--focus"),j(t,r+="-text"),D.fire("blur",[u])}function Cu(u){var D=this["_"+W],F=u.target,t=D.state.n+"__tag";b(F,t)||_(F,"."+t)||D.focus()}function su(u){var D=this,F=D["_"+W];F._tags;var t=F.state.n+"__tag--selected";R(D,t),Y(D),tu(p(D))}function ou(u){var D=this["_"+W],F=D._tags,t=D.state,e=t.n+"__tag--selected",n=[];for(var r in F)b(F[r],e)&&n.push(r);u.clipboardData.setData("text/plain",n.join(t.join)),D.fire("copy",[u,n]).focus(),H(u)}function Au(u){var D=this["_"+W],F=D._mask,t=D._tags,e=D.state;F.input;var n=e.n+"__tag--selected",r=[];for(var i in t)b(t[i],n)&&(r.push(i),D.let(i,1));u.clipboardData.setData("text/plain",r.join(e.join)),D.fire("cut",[u,r]).fire("change",[this.title]).focus(),H(u)}function fu(u){var D=this["_"+W],F=D._mask,t=D._tags,e=D.mask,n=D.self,r=D.state,i=F.hint,E=F.input,a=F.text,C=r.n;for(var s in t)j(t[s],C+"__tag--selected");R(a,C+"__text--focus"),R(e,C+="--focus"),R(e,C+="-text"),P((function(){return N(i,m(E,!1)?"":n.placeholder)}),1)(),D.focus().fire("focus",[u])}function cu(){this["_"+W].focus()}function lu(u){this["_"+W].fire("min.tags").focus(),H(u)}function Bu(u){var D=this["_"+W];D._mask;var F=D.mask,t=D.state.n;R(F,t+="--focus"),R(F,t+="-tag"),D.fire("focus.tag",[u])}function pu(u){var D,F=this,t=u.key,e=ru=u.ctrlKey,n=iu=u.shiftKey,r=F["_"+W],i=r._mask,E=r._tags;r.mask;var C,s,A,f=r.state,c=i.text,l=d(F),B=h(F),v=f.n+"__tag--selected";if(n)R(F,v),tu(p(F)),z===t?(l&&(b(l,v)?j(F,v):R(l,v),Y(l),tu(p(l))),D=!0):G===t&&(B&&c!==B&&(b(B,v)?j(F,v):R(B,v),Y(B),tu(p(B))),D=!0);else if(e)if("a"===t){for(var _ in E)Y(E[_]),tu(p(E[_])),R(E[_],v);D=!0}else z===t?(l&&Y(l),D=!0):G===t?(B&&c!==B?Y(B):r.focus(),D=!0):V!==t&&" "!==t||(K(F,v),b(F,v)?(Y(F),tu(p(F))):tu(p(o(E).pop())),D=!0);else{var g=[];for(var m in E)b(E[m],v)&&g.push(m),F!==E[m]&&j(E[m],v);if(J===t)(C=o(E).shift())&&Y(C),D=!0;else if(U===t)(s=o(E).pop())&&Y(s),D=!0;else if(V===t||" "===t)K(F,v),b(F,v)?(Y(F),tu(p(F))):tu(p(o(E).pop())),D=!0;else if(z===t)l&&Y(l),D=!0;else if(G===t)B&&c!==B?Y(B):r.focus(),D=!0;else if(Q===t){if(r.let(A=F.title,1),a(g)>1)for(var k;k=g.pop();)l=E[k]&&d(E[k]),r.let(k,1);r.fire("change",[A]),l?(Y(l),tu(p(l))):r.focus(),D=!0}else if("Delete"===t){if(r.let(A=F.title,1),a(g)>1)for(var x;x=g.shift();)B=E[x]&&h(E[x]),r.let(x,1);r.fire("change",[A]),B&&c!==B?(Y(B),tu(p(B))):r.focus(),D=!0}else"Escape"!==t&&"Tab"!==t||(r.focus(),D=!0)}D&&H(u)}function vu(){ru=iu=!1}function hu(D){var F=this,t=Z(F),e=F["_"+W],n=e.state.escape;if("\n"===t&&(u("\n",n)||u(13,n))||"\t"===t&&(u("\t",n)||u(9,n))||u(t,n))return e.set(m(F).slice(0,-1)).focus().text="",H(D)}function _u(D){var F,e=this,n=D.key,r=D.keyCode,i=ru=D.ctrlKey,E=iu=D.shiftKey,a=e["_"+W],C=a._active,s=a._mask,A=a._tags;a.mask;var f,c,B=a.self,v=a.state,h=s.hint,_=v.n+"__tag--selected";if(escape=v.escape,!C)return H(D);if(V===n&&(u("\n",escape)||u(13,escape))||"Tab"===n&&(u("\t",escape)||u(9,escape))||u(n,escape)||u(r,escape))return a.set(m(e)).focus().text="",H(D);P((function(){return N(h,m(e,!1)?"":B.placeholder)}),1)();var d,k=""===Z(e),b=null===m(e,!1);if(E)(b||k)&&z===n&&(c=o(A).pop())&&(c&&(Y(c),tu(p(c))),R(c,_),F=!0);else if(i)if("a"===n&&null===m(e,!1)&&null!==a.value){for(var x in A)Y(A[x]),tu(p(A[x])),R(A[x],_);F=!0}else J===n?((f=o(A).shift())&&Y(f),F=!0):U===n||z===n?((c=o(A).pop())&&Y(c),F=!0):Q===n&&((c=o(A).pop())&&a.let(c.title),a.focus(),F=!0);else if(V===n){var y=g(B);if(y&&t(y.requestSubmit)){var j=(d="button:not([type]),button[type=submit],input[type=image],input[type=submit]",(y||l).querySelector(d));j?y.requestSubmit(j):y.requestSubmit()}F=!0}else b?J===n?((f=o(A).shift())&&Y(f),F=!0):U===n||z===n?((c=o(A).pop())&&Y(c),F=!0):Q===n&&((c=o(A).pop())&&a.let(c.title),a.focus(),F=!0):k&&z===n&&((c=o(A).pop())&&Y(c),F=!0);F&&H(D)}function gu(){ru=iu=!1}function du(u){var D=this["_"+W],F=D._tags,t=D.state,e=t.n+"__tag--selected",n=!0,r=(u.clipboardData||B.clipboardData).getData("text")+"";for(var i in F)if(!b(F[i],e)){n=!1;break}n&&D.value&&D.value.split(t.join).forEach((function(u){return D.let(u,1)}));var E=r.split(t.join);E.forEach((function(u){return D.set(u,-1,1)})),D.fire("paste",[u,E]).focus().fire("change"),H(u)}function mu(u){var D=this,F=D["_"+W],t=F._mask,e=F.self,n=F.state,r=t.hint,i=(u.clipboardData||B.clipboardData).getData("text")+"";(function(u,D){var F,t=B.getSelection();t.rangeCount&&((F=t.getRangeAt(0)).deleteContents(),F.insertNode(l.createTextNode(D)))})(0,i),N(r,m(D)?"":e.placeholder),P((function(){if(i=m(D),F.text="",i){var t=i.split(n.join);t.forEach((function(u){return F.set(u,-1,1)})),F.fire("paste",[u,t]).fire("change")}}),1)(),H(u)}function ku(u){var D=this,F=D["_"+W],t=F._active,e=F._mask,n=F._tags,r=F.state,i=e.text,E=r.n+"__tag--selected";if(t){if(Y(D),K(D,E),ru);else if(iu){Fu();var C,s=_(D),A=(d="."+E,(s||l).querySelectorAll(d)),f=A[0],c=A[a(A)-1];if(f!==c)for(;(C=h(f))&&i!==C&&f!==c;)R(f=C,E)}else{Fu();var B=2===u.button,v=0;for(var g in n)b(n[g],E)&&++v,D===n[g]||B||j(n[g],E);v>0&&R(D,E)}var d;b(D,E)?(Y(D),tu(p(D))):tu(o(n).pop()),F.fire("touch.tag",[u]),H(u),function(u){u&&u.stopPropagation()}(u)}}function bu(u){var D=_(this),F=D["_"+W];F._mask.input,I("click",this,bu),F.let(D.title).focus(),H(u)}function xu(u){this["_"+W].let().fire("reset",[u])}function yu(u){var D=this["_"+W],F=D._tags,t=D.state;return C(F)<t.min?(D.fire("min.tags").focus(),H(u)):D.fire("submit",[u])}return nu.attach=function(u,F){var e=this;if(u=u||e.self,F&&E(F)&&(F={join:F}),F=f({},e.state,F||{}),b(u,F.n+"__self"))return e;(function(u){return u.required})(u)&&!F.min&&(F.min=1),e._active=!Du(u)&&!function(u){return u.readOnly}(u),e._tags={},e._value=uu(u)||null,e.self=u,e.state=F;var n=F.n,C=g(u),s=L("div",{class:n,tabindex:!Du(u)&&-1});e.mask=s;var o,A,c=L("span",{class:n+"__tags"}),l=L("span",{class:n+"__text"}),B=L("span",{contenteditable:!Du(u)&&"",spellcheck:"false"}),p=L("span",u.placeholder+"");T(s,c),T(c,l),T(l,B),T(l,p),R(u,n+"__self"),A=s,_(o=u).insertBefore(A,h(o,!0)),C&&(C["_"+W]=e,M("reset",C,xu),M("submit",C,yu)),M("blur",B,au),M("click",s,Cu),M("focus",u,cu),M("focus",B,fu),M("input",B,hu),M("invalid",u,lu),M("keydown",B,_u),M("keyup",B,gu),M("paste",B,mu),u.tabIndex=-1,s["_"+W]=e,B["_"+W]=e;var v={};if(v.hint=p,v.input=B,v.of=u,v.self=s,v.tags=c,v.text=l,e._mask=v,e._value&&e._value.split(F.join).forEach((function(u){return e.set(u,-1,1,1)})),i(F)&&D(F.with))for(var d=0,m=a(F.with);d<m;++d){var k=F.with[d];E(k)&&(k=eu[k]),t(k)?k.call(e,u,F):r(k)&&t(k.attach)&&k.attach.call(e,u,F)}return e},nu.blur=function(){Fu();var u=this._mask,D=this._tags,F=u.input;for(var t in D)D[t].blur();return F.blur()},nu.detach=function(){var u=this,F=u._mask,e=u.mask,n=u.self,i=u.state,C=F.input;if(!b(n,i.n+"__self"))return u;var s=g(n);if(u._active=!1,s&&(I("reset",s,xu),I("submit",s,yu)),I("blur",C,au),I("click",e,Cu),I("focus",C,fu),I("focus",n,cu),I("input",C,hu),I("invalid",n,lu),I("keydown",C,_u),I("keyup",C,gu),I("paste",C,mu),D(i.with))for(var o=0,A=a(i.with);o<A;++o){var f=i.with[o];E(f)&&(f=eu[f]),r(f)&&t(f.detach)&&f.detach.call(u,n,i)}return n.tabIndex=null,j(n,i.n+"__self"),w(e),u._mask={of:n},u.mask=null,u},nu.focus=function(u){var D=this._mask.input;return D&&(Y(D),tu(D,u)),this},nu.get=function(u){var D=this,F=D._active,t=D._tags;return!!F&&(D.fire("get.tag",[u]),t[u]?s(t).indexOf(u):null)},nu.let=function(u,D){var t=this,e=t._active,n=t._tags,r=t._value,i=t.self,E=t.state;if(!e)return t;if(!F(u))return t.value&&t.value.split(E.join).forEach((function(u){return t.let(u,1)})),r.split(E.join).forEach((function(u){return t.set(u,-1,1)})),t.fire("change");if(C(n)<E.min)return t.fire("min.tags",[u]);if(!n[u])return t;var a=n[u];v(a,0);var o=v(a,1);return I("blur",a,Eu),I("contextmenu",a,su),I("copy",a,ou),I("cut",a,Au),I("focus",a,Bu),I("keydown",a,pu),I("keyup",a,vu),I("mousedown",a,ku),I("mousedown",o,bu),I("paste",a,du),I("touchstart",a,ku),I("touchstart",o,bu),w(a),delete t._tags[u],i.value=s(t._tags).join(E.join),t.fire("let.tag",[u]),D||t.fire("change",[u]),t},nu.set=function(u,D,F,e){var r=this,i=r._active,a=r._filter,o=r._mask,A=r._tags,f=r.self,c=r.state,l=o.text,B=c.pattern,p=c.n;if(!i&&!e)return r;if(C(A)>=c.max)return r.fire("max.tags",[u]);if(t(a)&&(u=a.call(r,u)),r.fire("set.tag",[u]),""===u||E(B)&&!$(B).test(u))return r.fire("not.tag",[u]);if(A[u])return r.fire("has.tag",[u]);r.fire("is.tag",[u]);var v=L("span",{class:p+"__tag",tabindex:!!i&&-1,title:u}),h=L("span",u.replace(/&/g,"&amp;").replace(/>/g,"&gt;").replace(/</g,"&lt;")),_=L("span",{class:p+"__x",tabindex:-1});if(i&&(M("blur",v,Eu),M("contextmenu",v,su),M("copy",v,ou),M("cut",v,Au),M("focus",v,Bu),M("keydown",v,pu),M("keyup",v,vu),M("mousedown",v,ku),M("mousedown",_,bu),M("paste",v,du),M("touchstart",v,ku),M("touchstart",_,bu),v["_"+W]=r),T(v,h),T(v,_),function(u){return n(u)&&0==u%1}(D)&&D>=0){var g=s(A);g.splice(D,0,u),r._tags={},A[u]=v,g.forEach((function(u){r._tags[u]=A[u],q(l,A[u])}))}else q(l,v),r._tags[u]=v;return f.value=s(r._tags).join(c.join),r.fire("set.tag",[u]),F||r.fire("change",[u]),r},eu}));