/*!
 * =======================================================
 *  SIMPLEST TAGS INPUT BEAUTIFIER 2.2.0
 * =======================================================
 *
 *   Author: Taufik Nurrohman
 *   URL: https://github.com/tovic
 *   License: MIT
 *
 * -- USAGE: ---------------------------------------------
 *
 *   var tags = new TIB(document.querySelector('input'));
 *
 * -------------------------------------------------------
 *
 */
!function(e,t,n){function E(e){return t.createElement(e)}function _(e){return Object.keys(e)}function L(e){return _(e).length}var i="__instance__",s=setTimeout,r="innerHTML",a="textContent",o="class",f=o+"Name",u=o+"es",l="toLowerCase",c="replace",p="pattern",g="placeholder",d="indexOf",v="firstChild",h="parentNode",o="Sibling",m="next"+o,w="previous"+o,y="appendChild",j="insertBefore",x="removeChild",o="Attribute",b="set"+o,k="get"+o,C="preventDefault",D="addEventListener";!function(e){e.version="2.2.0",e[i]={},e.each=function(t,n){return s(function(){var s,n=e[i];for(s in n)t(n[s],s,n)},0===n?0:n||1),e}}(e[n]=function(t,o){function M(){A.focus()}function q(e){var n,t=e?this:A;s(function(){n=t[a].split(B.join);for(H in n)N.set(n[H])},1)}function P(){A[r]="",A[m][r]=$}var S,A,H,I,N=this,T=Date.now(),$=t[k]("data-"+g)||t[g]||"",B={join:", ",max:9999,escape:[","],alert:!0,text:["Delete “%s%”","Duplicate “%s%”","Please match the requested format: %s%"],classes:["tags","tag","tags-input","tags-output","tags-view"],update:function(){}},K=E("span"),O=E("span"),R="data-tag";e[n][i][t.id||t.name||L(e[n][i])]=N,o="string"==typeof o?{join:o}:o||{};for(H in B)"undefined"!=typeof o[H]&&(B[H]=o[H]);S=B[p]||t[k]("data-"+p),B[g]&&($=B[g]),t[f]=B[u][3],K[f]=B[u][0]+" "+B[u][0]+"-"+T,K[D]("click",M,!1),t[D]("focus",M,!1),K.id=B[u][0]+":"+(t.id||T),K[r]='<span class="'+B[u][4]+'"></span>',O[f]=B[u][2],O[r]='<span contenteditable spellcheck="false" style="white-space:nowrap;outline:none;"></span><span>'+$+"</span>",t[h][j](K,t[m]||null),K[v][y](O),A=O[v],N.tags={},N.success=1,N.error=0,N.filter=function(e){return S?!e||new RegExp(S).test(e)?e:!1:(e+"")[c](new RegExp("["+B.join[c](/\s/g,"")+"]|[-\\s]{2,}|^\\s+|\\s+$","g"),"")[l]()},N.update=function(e,n){for(t.value="";(H=K[v][v])&&H[k](R);)K[v][x](H);if(0===e)e=_(N.tags);else{for(H in e)I=N.filter(e[H]),I&&(N.tags[I]=1);e=_(N.tags)}N.tags={};for(H in e)N.set(e[H],n);return B.update(N),N},N.reset=function(e){return e=N.filter(e||""),e?delete N.tags[e]:N.tags={},N.update(0,1)},N.set=function(e,n){var r,i=B.alert,s=B.text;if(e=N.filter(e),e===!1)return P(),i&&(N.error=1,r=(s[2]||e)[c](/%s%/g,S),"function"==typeof i?i(r,e,N):alert(r)),N;if(""===e||L(N.tags)===B.max)return P(),N;var a=E("span"),o=E("a");return a[f]=B[u][1],a[b](R,e),o.href="javascript:;",o.title=(s[0]||"")[c](/%s%/g,e),o[D]("click",function(e){var t=this,n=t[h],i=t[h][k](R);n[h][x](n),N.reset(i),M(),e[C]()},!1),a[y](o),P(),N.tags[e]?n?K[v][j](a,O):i&&(N.error=1,r=(s[1]||e)[c](/%s%/g,e),"function"==typeof i?i(r,e,N):alert(r)):(N.tags[e]=1,K[v][j](a,O)),t.value=_(N.tags).join(B.join),!n&&B.update(N),N},function(){return A[D]("blur",function(){N.error=0,N.set(this[a])},!1),A[D]("paste",q,!1),A[D]("keydown",function(e){N.error=0;var b,t=this,n=e.keyCode,i=K,o=B.escape,f=(e.key||String.fromCharCode(n))[l](),u=e.ctrlKey,c=e.shiftKey,p=O[w]&&O[w][k](R),g=A[m],v="tab"===f||!c&&9===n,y="enter"===f||!c&&13===n,j=" "===f||!c&&32===n,x="backspace"===f||!c&&8===n;if(!u&&y&&-1===o[d]("\n")){for(;i=i[h];)if("form"===i.nodeName[l]()){b=i;break}N.set(t[a]),0===N.error&&b&&b.submit()}else if(u&&("v"===f||!c&&86===n))q();else if(!t[a]&&x)N.reset(p),M();else{var D,E;for(H in o)if(D=o[H],E="s"===D,(E||"	"===D)&&v||(E||"\n"===D)&&y||(E||" "===D)&&j)return s(function(){N.set(t[a]),M()},1),void e[C]();s(function(){var e=t[a];for(g[r]=e?"":$,H=0,I=o.length;I>H;++H)if(o[H]&&-1!==e[d](o[H])){N.set(e.split(o[H]).join(""));break}},1)}},!1),N}(),N.update(t.value.split(B.join),1),N.config=B,N.input=O,N.view=K,N.target=N.output=t})}(window,document,"TIB");