/*!
 * ==============================================================
 *  TAG PICKER 3.0.12
 * ==============================================================
 * Author: Taufik Nurrohman <https://github.com/taufik-nurrohman>
 * License: MIT
 * --------------------------------------------------------------
 */
!function(t,n,e){var i,a="ArrowLeft",c="ArrowRight",u="Backspace",s="Delete",r="Enter",o="Tab",f="appendChild",l="children",g="classList",p="createElement",v="ctrlKey",h="disabled",d="firstChild",b="indexOf",m="innerHTML",k="insertBefore",x="key",y=x+"Code",w="nextSibling",j="parentNode",T="previousSibling",C="readOnly",E="removeAttribute",L="removeChild",P="replace",A="setAttribute",O="shiftKey",B="textContent",D=setTimeout;function K(t,n){var e=n[b](t);return e<0?null:e}function R(t,n){return t[g].remove(n)}function S(t,n){return t[g].add(n)}function z(t,n){return n[b](t)>=0}function H(t){return"number"==typeof t}function M(t){return void 0!==t||null===t}function N(t){return"string"==typeof t}function _(t){(function(t){return t&&t[j]})(t)&&t[j][L](t)}function q(t,e,i){var a,c,u=N(t)?n[p](t):t;if((e||""===e)&&(u[m]=e),i)for(a in i)null===(c=i[a])||!1===c?u[E](a):u[A](a,c);return u}(i=t.TP=function(n,e){if(n){var i,g,p,b=this,E=t.TP,L=n.placeholder||"",A=n.getAttribute("tabindex"),F={},G=Object.assign({},E.state,N(e)?{join:e}:e||{});if(n.TP)return b;if(!(b instanceof E))return new E(n,G);E.instances[n.id||n.name||Object.keys(E.instances).length]=b,n.TP=1;var I,J=q("span",0,{class:G.class}),Q=q("span",0,{class:"tags"}),U=q("span",0,{class:"editor tag"}),V=q("span",0,{contenteditable:!n[h]&&"true",spellcheck:"false",style:"white-space:pre;"}),W=q("span");b.f=function(t){return t.toLowerCase()[P](/[^ a-z0-9-]/g,"")},pt(""),S(n,G.class+"-source"),n[j][k](J,n[w]),J[f](Q),Q[f](U),U[f](V),U[f](W),q(n,0,{tabindex:"-1"}),I=n.form,ht(V,"blur",$),ht(V,"click",tt),ht(V,"focus",nt),ht(V,"keydown",et),ht(V,"paste",ct),ht(n,"focus",st),ht(J,"click",ut),I&&ht(I,"submit",at),b.tags=[],it(n.value),b.hooks=F,b.input=V,b.self=b.view=J,b.source=b.output=n,b.state=G,b.blur=function(){return!n[h]&&(V.blur(),$()),b},b.click=function(){return J.click(),ut(),b},b.fire=X,b.focus=function(){return n[h]||(V.focus(),nt()),b},b.get=function(t){return n[h]?null:bt(t,1)},b.let=function(t){if(!n[h]&&!n[C]){var e=G.min;if(Z(),e>0&&b.tags.length<e)return X("min.tags",[e]),b;yt(t),mt(t)}return b},b.on=function(t,n){return M(F[t])||(F[t]=[]),M(n)&&F[t].push(n),b},b.off=function(t,n){if(!M(t))return F={},b;if(M(F[t]))if(M(n)){for(var e=0,i=F[t].length;e<i;++e)n===F[t][e]&&F[t].splice(e,1);0===i&&delete F[t]}else delete F[t];return b},b.pop=function(){return n.TP?(delete n.TP,vt(V,"blur",$),vt(V,"click",tt),vt(V,"focus",nt),vt(V,"keydown",et),vt(V,"paste",ct),vt(n,"focus",st),vt(J,"click",ut),I&&vt(I,"submit",at),b.tags.forEach(yt),R(n,G.class+"-source"),q(n,0,{tabindex:A}),_(J),X("pop",[b.tags])):b},b.set=function(t,e){if(!n[h]&&!n[C]){var i=G.max,a=b.tags;bt(t)?X("has.tag",[t,K(t,a)]):a.length<i?(xt(t,e),kt(t,e)):X("max.tags",[i])}return b},b.value=function(t){return!n[h]&&!n[C]&&it(t),b}}function X(t,n){if(!M(F[t]))return b;for(var e=0,i=F[t].length;e<i;++e)F[t][e].apply(b,n);return b}function Y(t){return b.f(t)[P](new RegExp("("+G.escape.join("|")[P](/\\/g,"\\\\")+")+"),"").trim()}function Z(){if(n[h]||n[C])return pt("");var t,e=Y(V[B]),i=b.tags;e&&(bt(e)?X("has.tag",[e,K(e,i)]):(xt(e),kt(e),X("change",[e,t=i.length]),X("set.tag",[e,t])),pt(""))}function $(){Z(),R(J,"focus"),R(J,"focus.input"),X("blur",[p,b.tags.length])}function tt(){X("click",[b.tags])}function nt(){S(J,"focus"),S(J,"focus.input"),X("focus",[b.tags])}function et(t){var e,i=G.escape,c=t[y],s=t[x],f=t[v],l=r===s||13===c,g=t[O],p=o===s||9===c,d=U[T],k=b.tags.length,w=G.max,j=Y(V[B]);l?s="\n":p&&(s="\t"),p||(n[h]||n[C]?(l&&n[C]&&wt(),dt(t)):z(s,i)||z(c,i)?(k<w?Z():(pt(""),X("max.tags",[w])),dt(t)):l?(wt(),dt(t)):D(function(){var n=V[B],r=Y(n);z(n.slice(-1),i)?(k<w?Z():(pt(""),X("max.tags",[w])),dt(t)):""!==r||f||g||(""!==j||u!==s&&8!==c?a!==s&&37!==c||d&&d.focus():(e=b.tags[k-1],R(J,"focus.tag"),yt(e),mt(e),d&&(X("change",[e,k-1]),X("let.tag",[e,k-1])))),W[m]=r?"":L},0))}function it(t){if(J[j])for(var e;e=U[T];)yt(e.title);for(b.tags=[],n.value="",t=t?t.split(G.join):[],g=G.max,i=0;i<g&&t[i];++i)if(""!==(p=Y(t[i]))){if(bt(p))continue;xt(p),kt(p),X("change",[p,i]),X("set.tag",[p,i])}}function at(t){if(!n[h]){var e=G.min;return Z(),e>0&&b.tags.length<e?(pt("",1),X("min.tags",[e]),void dt(t)):1}}function ct(){D(function(){n[h]||n[C]||it(V[B]),pt("")},0)}function ut(t){t&&J===t.target&&(V.focus(),tt())}function st(){V.focus()}function rt(){var t=this.title,n=b.tags;R(J,"focus"),R(J,"focus.tag"),X("blur.tag",[t,K(t,n)])}function ot(){var t=this.title;X("click.tag",[t,K(t,b.tags)])}function ft(){var t=this.title,n=b.tags;S(J,"focus"),S(J,"focus.tag"),X("focus.tag",[t,K(t,n)])}function lt(t){if(!n[h]&&!n[C]){var e=this[j].title,i=K(e,b.tags);yt(e),mt(e),pt("",1),X("change",[e,i]),X("click.tag",[e,i]),X("let.tag",[e,i])}dt(t)}function gt(t){var e=this,i=t[y],r=t[x],o=(t[v],n[C]),f=(t[O],e[T]),l=e[w];if(o||a!==r&&37!==i)if(o||c!==r&&39!==i){if(u===r||s===r||8===i||46===i){if(!o){var g=e.title,p=K(g,b.tags);R(J,"focus.tag"),yt(g),mt(g),u===r||8===i?f?f.focus():pt("",1):l&&l!==U?l.focus():pt("",1),X("change",[g,p]),X("let.tag",[g,p])}dt(t)}}else l&&l!==U?l.focus():pt("",1),dt(t);else f&&(f.focus(),dt(t))}function pt(t,n){V[B]=t,W[B]=t?"":L,n&&V.focus()}function vt(t,n,e){t.removeEventListener(n,e)}function ht(t,n,e){t.addEventListener(n,e,!1)}function dt(t){t&&t.preventDefault()}function bt(t,n){var e=K(t,b.tags);return n&&X("get.tag",[t,e]),H(e)?t:null}function mt(t){var e=K(t,b.tags);return!!(H(e)&&e>=0)&&(b.tags.splice(e,1),n.value=b.tags.join(G.join),!0)}function kt(t,e){H(e)?(e=e<0?0:e,b.tags.splice(e,0,t)):b.tags.push(t),n.value=b.tags.join(G.join)}function xt(t,e){var i=q("span",0,{class:"tag",tabindex:!n[h]&&"0",title:t});if(G.x){var a=q("a",0,{href:"",tabindex:"-1"});ht(a,"click",lt),i[f](a)}ht(i,"blur",rt),ht(i,"click",ot),ht(i,"focus",ft),ht(i,"keydown",gt),Q[j]&&(H(e)&&b.tags[e]?Q[k](i,Q[l][e]):Q[k](i,U))}function yt(t){var n,e=K(t,b.tags);if(H(e)&&e>=0&&(n=Q.children[e])){if(vt(n,"blur",rt),vt(n,"click",ot),vt(n,"focus",ft),vt(n,"keydown",gt),G.x){var i=n[d];vt(i,"click",lt),_(i)}_(n)}}function wt(){at()&&I&&I.submit()}}).version="3.0.12",i.state={class:"tag-picker",escape:[",",188],join:", ",max:9999,min:0,x:!1},i.instances={},i._=i.prototype}(window,document);
