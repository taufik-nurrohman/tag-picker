/*!
 * ==============================================================
 *  TAG PICKER 3.0.14
 * ==============================================================
 * Author: Taufik Nurrohman <https://github.com/taufik-nurrohman>
 * License: MIT
 * --------------------------------------------------------------
 */
!function(t,n,e){var i,a="ArrowLeft",c="ArrowRight",u="Backspace",s="Delete",r="Enter",o="Tab",f="appendChild",l="children",g="classList",v="createElement",p="ctrlKey",h="disabled",d="firstChild",b="indexOf",m="innerHTML",k="insertBefore",x="key",w=x+"Code",y="nextSibling",j="parentNode",T="previousSibling",C="readOnly",E="removeAttribute",L="removeChild",P="replace",A="setAttribute",O="shiftKey",B="textContent",D=setTimeout;function K(t,n){var e=n[b](t);return e<0?null:e}function R(t,n){return t[g].remove(n)}function S(t,n){return t[g].add(n)}function z(t,n){return n[b](t)>=0}function H(t){return"number"==typeof t}function M(t){return void 0!==t&&null!==t}function N(t){return"string"==typeof t}function q(t){(function(t){return t&&t[j]})(t)&&t[j][L](t)}function F(t,e,i){var a,c,u=N(t)?n[v](t):t;if((e||""===e)&&(u[m]=e),i)for(a in i)null===(c=i[a])||!1===c?u[E](a):u[A](a,c);return u}(i=t.TP=function(n,e){if(n){var i,g,v,b=this,E=t.TP,L=n.placeholder||"",A=n.getAttribute("tabindex"),G={},I=Object.assign({},E.state,N(e)?{join:e}:e||{});if(n.TP)return b;if(!(b instanceof E))return new E(n,I);E.instances[n.id||n.name||Object.keys(E.instances).length]=b,n.TP=1;var J,Q=F("span",0,{class:I.class}),U=F("span",0,{class:"tags"}),V=F("span",0,{class:"editor tag"}),W=F("span",0,{contenteditable:!n[h]&&"true",spellcheck:"false",style:"white-space:pre;"}),X=F("span");b.f=function(t){return t.toLowerCase()[P](/[^ a-z0-9-]/g,"")},vt(""),S(n,I.class+"-source"),n[j][k](Q,n[y]),Q[f](U),U[f](V),V[f](W),V[f](X),F(n,0,{tabindex:"-1"}),J=n.form,ht(W,"blur",_),ht(W,"click",tt),ht(W,"focus",nt),ht(W,"keydown",et),ht(W,"paste",ct),ht(n,"focus",st),ht(Q,"click",ut),J&&ht(J,"submit",at),b.tags=[],it(n.value),b.hooks=G,b.input=W,b.self=b.view=Q,b.source=b.output=n,b.state=I,b.blur=function(){return!n[h]&&(W.blur(),_()),b},b.click=function(){return Q.click(),ut(),b},b.fire=Y,b.focus=function(){return n[h]||(W.focus(),nt()),b},b.get=function(t){return n[h]?null:bt(t,1)},b.let=function(t){if(!n[h]&&!n[C]){var e=I.min;if($(),e>0&&b.tags.length<e)return Y("min.tags",[e]),b;wt(t),mt(t)}return b},b.on=function(t,n){return M(G[t])||(G[t]=[]),M(n)&&G[t].push(n),b},b.off=function(t,n){if(!M(t))return G={},b;if(M(G[t]))if(M(n)){for(var e=0,i=G[t].length;e<i;++e)n===G[t][e]&&G[t].splice(e,1);0===i&&delete G[t]}else delete G[t];return b},b.pop=function(){return n.TP?(delete n.TP,pt(W,"blur",_),pt(W,"click",tt),pt(W,"focus",nt),pt(W,"keydown",et),pt(W,"paste",ct),pt(n,"focus",st),pt(Q,"click",ut),J&&pt(J,"submit",at),b.tags.forEach(wt),R(n,I.class+"-source"),F(n,0,{tabindex:A}),q(Q),Y("pop",[b.tags])):b},b.set=function(t,e){if(!n[h]&&!n[C]){var i=I.max,a=b.tags;bt(t)?Y("has.tag",[t,K(t,a)]):a.length<i?(xt(t,e),kt(t,e)):Y("max.tags",[i])}return b},b.value=function(t){return!n[h]&&!n[C]&&it(t),b}}function Y(t,n){if(!M(G[t]))return b;for(var e=0,i=G[t].length;e<i;++e)G[t][e].apply(b,n);return b}function Z(t){return b.f(t)[P](new RegExp("("+I.escape.join("|")[P](/\\/g,"\\\\")+")+"),"").trim()}function $(){if(n[h]||n[C])return vt("");var t,e=Z(W[B]),i=b.tags;e&&(bt(e)?Y("has.tag",[e,K(e,i)]):(xt(e),kt(e),Y("change",[e,t=i.length]),Y("set.tag",[e,t])),vt(""))}function _(){$(),R(Q,"focus"),R(Q,"focus.input"),Y("blur",[v,b.tags.length])}function tt(){Y("click",[b.tags])}function nt(){S(Q,"focus"),S(Q,"focus.input"),Y("focus",[b.tags])}function et(t){var e,i=I.escape,c=t[w],s=t[x],f=t[p],l=r===s||13===c,g=t[O],v=o===s||9===c,d=V[T],k=b.tags.length,y=I.max,j=Z(W[B]);l?s="\n":v&&(s="\t"),v||(n[h]||n[C]?(l&&n[C]&&yt(),dt(t)):z(s,i)||z(c,i)?(k<y?$():(vt(""),Y("max.tags",[y])),dt(t)):l?(yt(),dt(t)):D(function(){var n=W[B],r=Z(n);z(n.slice(-1),i)?(k<y?$():(vt(""),Y("max.tags",[y])),dt(t)):""!==r||f||g||(""!==j||u!==s&&8!==c?a!==s&&37!==c||d&&d.focus():(e=b.tags[k-1],R(Q,"focus.tag"),wt(e),mt(e),d&&(Y("change",[e,k-1]),Y("let.tag",[e,k-1])))),X[m]=r?"":L},0))}function it(t){if(Q[j])for(var e;e=V[T];)wt(e.title);for(b.tags=[],n.value="",t=t?t.split(I.join):[],g=I.max,i=0;i<g&&t[i];++i)if(""!==(v=Z(t[i]))){if(bt(v))continue;xt(v),kt(v),Y("change",[v,i]),Y("set.tag",[v,i])}}function at(t){if(!n[h]){var e=I.min;return $(),e>0&&b.tags.length<e?(vt("",1),Y("min.tags",[e]),void dt(t)):1}}function ct(){D(function(){n[h]||n[C]||it(W[B]),vt("")},0)}function ut(t){t&&Q===t.target&&(W.focus(),tt())}function st(){W.focus()}function rt(){var t=this.title,n=b.tags;R(Q,"focus"),R(Q,"focus.tag"),Y("blur.tag",[t,K(t,n)])}function ot(){var t=this.title;Y("click.tag",[t,K(t,b.tags)])}function ft(){var t=this.title,n=b.tags;S(Q,"focus"),S(Q,"focus.tag"),Y("focus.tag",[t,K(t,n)])}function lt(t){if(!n[h]&&!n[C]){var e=this[j].title,i=K(e,b.tags);wt(e),mt(e),vt("",1),Y("change",[e,i]),Y("click.tag",[e,i]),Y("let.tag",[e,i])}dt(t)}function gt(t){var e=this,i=t[w],r=t[x],o=(t[p],n[C]),f=(t[O],e[T]),l=e[y];if(o||a!==r&&37!==i)if(o||c!==r&&39!==i){if(u===r||s===r||8===i||46===i){if(!o){var g=e.title,v=K(g,b.tags);R(Q,"focus.tag"),wt(g),mt(g),u===r||8===i?f?f.focus():vt("",1):l&&l!==V?l.focus():vt("",1),Y("change",[g,v]),Y("let.tag",[g,v])}dt(t)}}else l&&l!==V?l.focus():vt("",1),dt(t);else f&&(f.focus(),dt(t))}function vt(t,n){W[B]=t,X[B]=t?"":L,n&&W.focus()}function pt(t,n,e){t.removeEventListener(n,e)}function ht(t,n,e){t.addEventListener(n,e,!1)}function dt(t){t&&t.preventDefault()}function bt(t,n){var e=K(t,b.tags);return n&&Y("get.tag",[t,e]),H(e)?t:null}function mt(t){var e=K(t,b.tags);return!!(H(e)&&e>=0)&&(b.tags.splice(e,1),n.value=b.tags.join(I.join),!0)}function kt(t,e){H(e)?(e=e<0?0:e,b.tags.splice(e,0,t)):b.tags.push(t),n.value=b.tags.join(I.join)}function xt(t,e){var i=F("span",0,{class:"tag",tabindex:!n[h]&&"0",title:t});if(I.x){var a=F("a",0,{href:"",tabindex:"-1"});ht(a,"click",lt),i[f](a)}ht(i,"blur",rt),ht(i,"click",ot),ht(i,"focus",ft),ht(i,"keydown",gt),U[j]&&(H(e)&&b.tags[e]?U[k](i,U[l][e]):U[k](i,V))}function wt(t){var n,e=K(t,b.tags);if(H(e)&&e>=0&&(n=U.children[e])){if(pt(n,"blur",rt),pt(n,"click",ot),pt(n,"focus",ft),pt(n,"keydown",gt),I.x){var i=n[d];pt(i,"click",lt),q(i)}q(n)}}function yt(){at()&&J&&J.submit()}}).version="3.0.14",i.state={class:"tag-picker",escape:[",",188],join:", ",max:9999,min:0,x:!1},i.instances={}}(window,document);
